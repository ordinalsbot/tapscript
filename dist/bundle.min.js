var tapscript=function(t){"use strict";function e(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function n(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const r={number:e,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:n,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");e(t.outputLen),e(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){n(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}};var s=r;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const i=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),o=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function a(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));let u=class{clone(){return this._cloneInto()}};function c(t){const e=e=>t().update(a(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}let f=class extends u{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=i(this.buffer)}update(t){s.exists(this);const{view:e,buffer:n,blockLen:r}=this,o=(t=a(t)).length;for(let s=0;s<o;){const a=Math.min(r-this.pos,o-s);if(a!==r)n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=i(t);for(;r<=o-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){s.exists(this),s.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:o}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let t=a;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const u=i(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<f;t++)u.setUint32(4*t,h[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return t.length=r,t.pos=o,t.finished=s,t.destroyed=i,r%e&&t.buffer.set(n),t}};const h=(t,e,n)=>t&e^t&n^e&n,d=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),p=new Uint32Array(64);let g=class extends f{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){const{A:t,B:e,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[t,e,n,r,s,i,o,a]}set(t,e,n,r,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)p[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=p[t-15],n=p[t-2],r=o(e,7)^o(e,18)^e>>>3,s=o(n,17)^o(n,19)^n>>>10;p[t]=s+p[t-7]+r+p[t-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:u,G:c,H:f}=this;for(let t=0;t<64;t++){const e=f+(o(a,6)^o(a,11)^o(a,25))+((l=a)&u^~l&c)+d[t]+p[t]|0,g=(o(n,2)^o(n,13)^o(n,22))+h(n,r,s)|0;f=c,c=u,u=a,a=i+e|0,i=s,s=r,r=n,n=e+g|0}var l;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(n,r,s,i,a,u,c,f)}roundClean(){p.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},y=class extends g{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const m=c((()=>new g));function w(t){if(t>Number.MAX_SAFE_INTEGER)throw new TypeError("Number exceeds safe bounds!")}c((()=>new y));const{getRandomValues:b}=crypto??globalThis.crypto??window.crypto;function v(t,e,n="be"){void 0===e&&(e=t.length),function(t,e){if(t.length>e)throw new TypeError(`Data is larger than array size: ${t.length} > ${e}`)}(t,e);const r=new Uint8Array(e).fill(0),s="be"===n?0:e-t.length;return r.set(t,s),r}function _(t){let e,n=0;const r=t.reduce(((t,e)=>t+e.length),0),s=new Uint8Array(r);for(e=0;e<t.length;e++){const r=t[e];s.set(r,n),n+=r.length}return s}const x=new TextEncoder,E=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function S(t){for(const e of E)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function O(t){return m(m(t))}const A={encode:function(t,e,n=!1){"string"==typeof t&&(t=x.encode(t));const r=S(e),s=r.length,i=[];let o,a,u,c="",f=0;for(o=0;o<t.length;o++)for(f=0,a=t[o],c+=a>0||(c.length^o)>0?"":"1";f in i||a>0;)u=i[f],u=u>0?256*u+a:a,a=u/s|0,i[f]=u%s,f++;for(;f-- >0;)c+=r[i[f]];return n&&c.length%4>0?c+"=".repeat(4-c.length%4):c},decode:function(t,e){const n=S(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a,u,c=0;for(o=0;o<t.length;o++){if(c=0,a=n.indexOf(t[o]),a<0)throw new Error(`Character range out of bounds: ${a}`);for(a>0||(i.length^o)>0||i.push(0);c in s||a>0;)u=s[c],u=u>0?u*r+a:a,a=u>>8,s[c]=u%256,c++}for(;c-- >0;)i.push(s[c]);return new Uint8Array(i)}},k=t=>{const e=function(t){return _([t,O(t).slice(0,4)])}(t);return A.encode(e,"base58")},C=t=>function(t){const e=t.slice(0,-4),n=t.slice(-4);if(O(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}(A.decode(t,"base58")),P="qpzry9x8gf2tvdw0s3jn54khce6mua7l",U=[996825010,642813549,513874426,1027748829,705979059],I=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function B(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(33554431&e)<<5^t[n];for(let t=0;t<5;++t)r>>t&1&&(e^=U[t])}return e}function T(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(31&t.charCodeAt(n));return e}function N(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,u=(1<<e+n-1)-1;for(const r of t){if(r<0||r>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(r));for(i=(i<<e|r)&u,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function L(t,e,n){const r=e.concat(function(t,e,n){const r=B(T(t).concat(e).concat([0,0,0,0,0,0]))^n.const,s=[];for(let t=0;t<6;++t)s.push(r>>5*(5-t)&31);return s}(t,e,n));let s=t+"1";for(let t=0;t<r.length;++t)s+=P.charAt(r[t]);return s}function Z(t){if(!function(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!r||!s}(t))throw new Error("Encoded string goes out of bounds!");if(!function(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}(t=t.toLowerCase()))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let r=n+1;r<t.length;++r){const n=P.indexOf(t.charAt(r));if(-1===n)throw new Error("Character idx out of bounds: "+String(r));e.push(n)}const s=I.find((t=>t.version===e[0]))??I[0];if(!function(t,e,n){return B(T(t).concat(e))===n.const}(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function R(t){const e=(t=t.toLowerCase()).split("1",1)[0],[n,r]=Z(t),s=N(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case null===s||i<2||i>40:throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}const j={encode:function(t,e="bc",n=0){const r=L(e,[n,...N([...t],8,5)],I.find((t=>t.version===n))??I[0]);return R(r),r},decode:R,version:function(t){t=t.toLowerCase();const[e,n]=Z(t);return n[0]}},H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",D=new TextEncoder;function F(t,e=!1,n=!0){"string"==typeof t&&(t=D.encode(t));const r=e?$:H;let s="",i=0,o=0;for(let e=0;e<t.length;e++)for(o=o<<8|t[e],i+=8;i>=6;)i-=6,s+=r[o>>i&63];if(i>0)for(o<<=6-i,s+=r[63&o];i<6;)s+=n?"=":"",i+=2;return s}function z(t,e=!1){const n=e||t.includes("-")||t.includes("_")?$.split(""):H.split(""),r=(t=t.replace(/=+$/,"")).split("");let s=0,i=0;const o=[];for(let t=0;t<r.length;t++){const e=r[t],a=n.indexOf(e);if(-1===a)throw new Error("Invalid character: "+e);s+=6,i<<=6,i|=a,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const K={encode:F,decode:z},V=t=>F(t,!0,!1),q=t=>z(t,!0),M=BigInt(0),G=BigInt(255),W=BigInt(256);function Y(t,e,n="be"){void 0===e&&(e=function(t){if(t<=0xffn)return 1;if(t<=0xffffn)return 2;if(t<=0xffffffffn)return 4;if(t<=0xffffffffffffffffn)return 8;if(t<=0xffffffffffffffffffffffffffffffffn)return 16;if(t<=0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn)return 32;throw new TypeError("Must specify a fixed buffer size for bigints greater than 32 bytes.")}(t));const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(;t>M;){const e=t&G,n=Number(e);r?i.setUint8(o++,n):i.setUint8(o--,n),t=(t-e)/W}return new Uint8Array(s)}function J(t,e,n="be"){void 0===e&&(e=function(t){if(t<=255)return 1;if(t<=65535)return 2;if(t<=4294967295)return 4;throw new TypeError("Numbers larger than 4 bytes must specify a fixed size!")}(t));const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(;t>0;){const e=255&t;r?i.setUint8(o++,t):i.setUint8(o--,t),t=(t-e)/256}return new Uint8Array(s)}const Q=new TextEncoder,X=new TextDecoder;function tt(t){return Q.encode(t)}function et(t){return X.decode(t)}function nt(t,e){!function(t){if(null!==t.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid characters in hex string: "+t);if(t.length%2!=0)throw new Error(`Length of hex string is invalid: ${t.length}`)}(t);const n=t.length/2;if(void 0===e&&(e=n),n>e)throw new TypeError(`Hex string is larger than array size: ${n} > ${e}`);return e}function rt(t,e,n){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return v(t,e,n);if("string"==typeof t)return function(t,e,n="le"){e=nt(t,e);const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(let e=0;e<t.length;e+=2){const n=t.substring(e,e+2),s=parseInt(n,16);r?i.setUint8(o++,s):i.setUint8(o--,s)}return new Uint8Array(s)}(t,e,n);if("bigint"==typeof t)return Y(t,e,n);if("number"==typeof t)return J(t,e,n);if("boolean"==typeof t)return Uint8Array.of(t?1:0);throw TypeError("Unsupported format:"+String(typeof t))}let st=class t extends Uint8Array{static{this.num=it}static{this.big=at}static{this.bin=ot}static{this.raw=ut}static{this.str=ct}static{this.hex=ft}static{this.bytes=ht}static{this.json=dt}static{this.base64=lt}static{this.b64url=pt}static{this.bech32=gt}static{this.b58chk=yt}static{this.encode=tt}static{this.decode=et}static random(e=32){const n=function(t=32){if("function"==typeof b)return crypto.getRandomValues(new Uint8Array(t));throw new Error("Crypto module missing getRandomValues!")}(e);return new t(n,e)}constructor(t,e,n){super(rt(t,e,n))}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new mt(this)}toNum(t="be"){return function(t){let e=0;for(let n=t.length-1;n>=0;n--)e=256*e+t[n],w(e);return e}("be"===t?this.reverse():this)}toBin(){return function(t){const e=new Array(8*t.length);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let t=7;t>=0;t--,n++)e[n]=r>>t&1}return e.join("")}(this)}toBig(t="be"){return function(t){let e=BigInt(0);for(let n=t.length-1;n>=0;n--)e=e*W+BigInt(t[n]);return BigInt(e)}("be"===t?this.reverse():this)}toHash(){const e=m(this);return new t(e)}toJson(){const t=et(this);return JSON.parse(t)}toBech32(t,e=0){return j.encode(this,t,e)}toStr(){return et(this)}toHex(){return function(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e}(this)}toBytes(){return new Uint8Array(this)}tob58chk(){return k(this)}toBase64(){return K.encode(this)}toB64url(){return V(this)}prepend(e){return t.join([t.bytes(e),this])}append(e){return t.join([this,t.bytes(e)])}slice(e,n){const r=new Uint8Array(this).slice(e,n);return new t(r)}subarray(e,n){const r=new Uint8Array(this).subarray(e,n);return new t(r)}reverse(){const e=new Uint8Array(this).reverse();return new t(e)}write(e,n){const r=t.bytes(e);this.set(r,n)}prefixSize(e){const n=t.varInt(this.length,e);return t.join([n,this])}static from(e){return new t(Uint8Array.from(e))}static of(...e){return new t(Uint8Array.of(...e))}static join(e){const n=_(e.map((e=>t.bytes(e))));return new t(n)}static varInt(e,n){if(e<253)return t.num(e,1);if(e<65536)return t.of(253,...t.num(e,2,n));if(e<4294967296)return t.of(254,...t.num(e,4,n));if(BigInt(e)<0x10000000000000000n)return t.of(255,...t.num(e,8,n));throw new Error(`Value is too large: ${e}`)}};function it(t,e,n){return new st(t,e,n)}function ot(t,e,n){return new st(function(t){const e=t.split("").map(Number);if(e.length%8!=0)throw new Error(`Binary array is invalid length: ${t.length}`);const n=new Uint8Array(e.length/8);for(let t=0,r=0;t<e.length;t+=8,r++){let s=0;for(let n=0;n<8;n++)s|=e[t+n]<<7-n;n[r]=s}return n}(t),e,n)}function at(t,e,n){return new st(t,e,n)}function ut(t,e,n){return new st(t,e,n)}function ct(t,e,n){return new st(tt(t),e,n)}function ft(t,e,n){return new st(t,e,n)}function ht(t,e,n){return new st(t,e,n)}function dt(t){return new st((e=t,tt(JSON.stringify(e,((t,e)=>"bigint"==typeof e?`${e}n`:e)))));var e}function lt(t){return new st(K.decode(t))}function pt(t){return new st(q(t))}function gt(t){return new st(j.decode(t))}function yt(t){return new st(C(t))}let mt=class{constructor(t){this.data=st.bytes(t),this.size=this.data.length}peek(t){if(t>this.size)throw new Error(`Size greater than stream: ${t} > ${this.size}`);return new st(this.data.slice(0,t))}read(t){t=t??this.readSize();const e=this.peek(t);return this.data=this.data.slice(t),this.size=this.data.length,e}readSize(t){const e=this.read(1).num;switch(!0){case e>=0&&e<253:return e;case 253===e:return this.read(2).toNum(t);case 254===e:return this.read(4).toNum(t);case 255===e:return this.read(8).toNum(t);default:throw new Error(`Varint is out of range: ${e}`)}}};function wt(t,e){const n=st.bytes(t);if(n.length!==e)throw new Error(`Invalid input size: ${n.hex} !== ${e}`)}function bt(t,e){if(e)throw new Error(t);return!1}function vt(t,...e){const n=st.str(t).digest.raw,r=e.map((t=>st.bytes(t)));return st.join([n,n,st.join(r)]).digest}const _t={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_SUCCESS80:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_SUCCESS98:98,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SUCCESS126:126,OP_SUCCESS127:127,OP_SUCCESS128:128,OP_SUCCESS129:129,OP_SIZE:130,OP_SUCCESS131:131,OP_SUCCESS132:132,OP_SUCCESS133:133,OP_SUCCESS134:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_SUCCESS137:137,OP_SUCCESS138:138,OP_1ADD:139,OP_1SUB:140,OP_SUCCESS141:141,OP_SUCCESS142:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_SUCCESS149:149,OP_SUCCESS150:150,OP_SUCCESS151:151,OP_SUCCESS152:152,OP_SUCCESS153:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_SUCCESS187:187,OP_SUCCESS188:188,OP_SUCCESS189:189,OP_SUCCESS190:190,OP_SUCCESS191:191,OP_SUCCESS192:192,OP_SUCCESS193:193,OP_SUCCESS194:194,OP_SUCCESS195:195,OP_SUCCESS196:196,OP_SUCCESS197:197,OP_SUCCESS198:198,OP_SUCCESS199:199,OP_SUCCESS200:200,OP_SUCCESS201:201,OP_SUCCESS202:202,OP_SUCCESS203:203,OP_SUCCESS204:204,OP_SUCCESS205:205,OP_SUCCESS206:206,OP_SUCCESS207:207,OP_SUCCESS208:208,OP_SUCCESS209:209,OP_SUCCESS210:210,OP_SUCCESS211:211,OP_SUCCESS212:212,OP_SUCCESS213:213,OP_SUCCESS214:214,OP_SUCCESS215:215,OP_SUCCESS216:216,OP_SUCCESS217:217,OP_SUCCESS218:218,OP_SUCCESS219:219,OP_SUCCESS220:220,OP_SUCCESS221:221,OP_SUCCESS222:222,OP_SUCCESS223:223,OP_SUCCESS224:224,OP_SUCCESS225:225,OP_SUCCESS226:226,OP_SUCCESS227:227,OP_SUCCESS228:228,OP_SUCCESS229:229,OP_SUCCESS230:230,OP_SUCCESS231:231,OP_SUCCESS232:232,OP_SUCCESS233:233,OP_SUCCESS234:234,OP_SUCCESS235:235,OP_SUCCESS236:236,OP_SUCCESS237:237,OP_SUCCESS238:238,OP_SUCCESS239:239,OP_SUCCESS240:240,OP_SUCCESS241:241,OP_SUCCESS242:242,OP_SUCCESS243:243,OP_SUCCESS244:244,OP_SUCCESS245:245,OP_SUCCESS246:246,OP_SUCCESS247:247,OP_SUCCESS248:248,OP_SUCCESS249:249,OP_SUCCESS250:250,OP_SUCCESS251:251,OP_SUCCESS252:252,OP_SUCCESS253:253,OP_SUCCESS254:254};function xt(t){if(t>186&&t<255)return"OP_SUCCESS"+String(t);for(const[e,n]of Object.entries(_t))if(n===t)return e;throw new Error("OPCODE not found:"+String(t))}function Et(t){switch(!0){case 0===t:return"opcode";case t>=1&&t<=75:return"varint";case 76===t:return"pushdata1";case 77===t:return"pushdata2";case 78===t:return"pushdata4";case t<=254:return"opcode";default:throw new Error(`Invalid word range: ${t}`)}}function St(t){switch(!0){case"number"!=typeof t:return!1;case 0===t:return!0;case[].includes(t):return!1;case 75<t&&t<254:return!0;default:return!1}}function Ot(t){return"string"==typeof t&&t.length%2==0&&/[0-9a-fA-F]/.test(t)}function At(t){return Ot(t)||t instanceof Uint8Array}const kt=520;function Ct(t=[],e=!0){let n=st.num(0);return Array.isArray(t)&&(n=st.raw(Pt(t))),Ot(t)&&(n=st.hex(t)),t instanceof Uint8Array&&(n=st.raw(t)),e&&(n=n.prefixSize("le")),n}function Pt(t){const e=[];for(const n of t)e.push(Ut(n));return e.length>0?st.join(e):new Uint8Array}function Ut(t){let e=new Uint8Array;if("string"==typeof t)if(t.startsWith("OP_PUSHBYTES_1"))e=st.hex(t.split(" ")[1]);else{if(t.startsWith("OP_"))return st.num(function(t){for(const[e,n]of Object.entries(_t))if(e===t)return Number(n);throw new Error("OPCODE not found:"+t)}(t),1);e=Ot(t)?st.hex(t):st.str(t)}else e=st.bytes(t);if(1===e.length)return 0!==e[0]&&e[0]<=16?(e[0]+=80,e):(e[0]>128&&e[0]<=255&&(e=new Uint8Array([e[0],0])),st.join([It(e.length),e]));if(e.length>kt){const t=function(t){const e=[],n=new mt(t);for(;n.size>kt;)e.push(n.read(kt));return e.push(n.read(n.size)),e}(e);return Pt(t)}return st.join([It(e.length),e])}function It(t){const e=st.num(76,1),n=st.num(77,1);switch(!0){case t<=75:return st.num(t);case t>75&&t<256:return st.join([e,st.num(t,1,"le")]);case t>=256&&t<=kt:return st.join([n,st.num(t,2,"le")]);default:throw new Error("Invalid word size:"+t.toString())}}function Bt(t,e=!1){let n=st.bytes(t);if(e){const t=n.stream.readSize("le");if(n=n.slice(1),n.length!==t)throw new Error(`Varint does not match stream size: ${t} !== ${n.length}`)}return function(t){const e=new mt(t),n=[],r=e.size;let s,i,o,a=0;for(;a<r;)switch(s=e.read(1).num,i=Et(s),a++,i){case"varint":n.push(e.read(s).hex),a+=s;break;case"pushdata1":o=e.read(1).reverse().num,n.push(e.read(o).hex),a+=o+1;break;case"pushdata2":o=e.read(2).reverse().num,n.push(e.read(o).hex),a+=o+2;break;case"pushdata4":o=e.read(4).reverse().num,n.push(e.read(o).hex),a+=o+4;break;case"opcode":if(!St(s))throw new Error(`Invalid OPCODE: ${s}`);n.push(xt(s));break;default:throw new Error(`Word type undefined: ${s}`)}return n}(n)}const Tt={toAsm:function(t,e){if(Array.isArray(t)&&(t=Ct(t,e)),t instanceof Uint8Array||Ot(t))return Bt(t,e);throw new Error("Invalid format: "+String(typeof t))},toBytes:function(t,e){if((t instanceof Uint8Array||Ot(t))&&(t=Bt(t,e)),Array.isArray(t))return Ct(t,e);throw new Error("Invalid format: "+String(typeof t))},toParam:function(t){if(!Array.isArray(t))return st.bytes(t);throw new Error("Invalid format: "+String(typeof t))}},Nt={encode:Ct,decode:Bt,fmt:Tt};function Lt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Zt(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const Rt={number:Lt,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:Zt,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Lt(t.outputLen),Lt(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){Zt(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};var jt=Rt;const Ht="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,$t=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Dt=(t,e)=>t<<32-e|t>>>e;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Ft(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));let zt=class{clone(){return this._cloneInto()}};function Kt(t){const e=e=>t().update(Ft(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Vt(t=32){if(Ht&&"function"==typeof Ht.getRandomValues)return Ht.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let qt=class extends zt{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=$t(this.buffer)}update(t){jt.exists(this);const{view:e,buffer:n,blockLen:r}=this,s=(t=Ft(t)).length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o!==r)n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=$t(t);for(;r<=s-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){jt.exists(this),jt.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=$t(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)o.setUint32(4*t,c[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return t.length=r,t.pos=o,t.finished=s,t.destroyed=i,r%e&&t.buffer.set(n),t}};const Mt=(t,e,n)=>t&e^t&n^e&n,Gt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64);let Jt=class extends qt{constructor(){super(64,32,8,!1),this.A=0|Wt[0],this.B=0|Wt[1],this.C=0|Wt[2],this.D=0|Wt[3],this.E=0|Wt[4],this.F=0|Wt[5],this.G=0|Wt[6],this.H=0|Wt[7]}get(){const{A:t,B:e,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[t,e,n,r,s,i,o,a]}set(t,e,n,r,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Yt[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Yt[t-15],n=Yt[t-2],r=Dt(e,7)^Dt(e,18)^e>>>3,s=Dt(n,17)^Dt(n,19)^n>>>10;Yt[t]=s+Yt[t-7]+r+Yt[t-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(Dt(o,6)^Dt(o,11)^Dt(o,25))+((f=o)&a^~f&u)+Gt[t]+Yt[t]|0,h=(Dt(n,2)^Dt(n,13)^Dt(n,22))+Mt(n,r,s)|0;c=u,u=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+h|0}var f;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,r,s,i,o,a,u,c)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Qt=class extends Jt{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xt=Kt((()=>new Jt));Kt((()=>new Qt));
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const te=BigInt(0),ee=BigInt(1),ne=BigInt(2),re=t=>t instanceof Uint8Array,se=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function ie(t){if(!re(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=se[t[n]];return e}function oe(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function ae(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function ue(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(t.length%2)throw new Error("hex string is invalid: unpadded "+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");e[n]=i}return e}function ce(t){return ae(ie(t))}function fe(t){if(!re(t))throw new Error("Uint8Array expected");return ae(ie(Uint8Array.from(t).reverse()))}const he=(t,e)=>ue(t.toString(16).padStart(2*e,"0")),de=(t,e)=>he(t,e).reverse();function le(t,e,n){let r;if("string"==typeof e)try{r=ue(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!re(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function pe(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!re(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}function ge(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}const ye=t=>(ne<<BigInt(t-1))-ee,me=t=>new Uint8Array(t),we=t=>Uint8Array.from(t);function be(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=me(t),s=me(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...t)=>n(s,r,...t),u=(t=me())=>{s=a(we([0]),t),r=a(),0!==t.length&&(s=a(we([1]),t),r=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return pe(...n)};return(t,e)=>{let n;for(o(),u(t);!(n=e(c()));)u();return o(),n}}const ve={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function _e(t,e,n={}){const r=(e,n,r)=>{const s=ve[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=t[e];if(!(r&&void 0===i||s(i,t)))throw new Error(`Invalid param ${String(e)}=${i} (${typeof i}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}var xe=Object.freeze({__proto__:null,bitGet:(t,e)=>t>>BigInt(e)&1n,bitLen:function(t){let e;for(e=0;t>0n;t>>=ee,e+=1);return e},bitMask:ye,bitSet:(t,e,n)=>t|(n?ee:te)<<BigInt(e),bytesToHex:ie,bytesToNumberBE:ce,bytesToNumberLE:fe,concatBytes:pe,createHmacDrbg:be,ensureBytes:le,equalBytes:function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},hexToBytes:ue,hexToNumber:ae,numberToBytesBE:he,numberToBytesLE:de,numberToHexUnpadded:oe,numberToVarBytesBE:t=>ue(oe(t)),utf8ToBytes:ge,validateObject:_e});
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ee=BigInt(0),Se=BigInt(1),Oe=BigInt(2),Ae=BigInt(3),ke=BigInt(4),Ce=BigInt(5),Pe=BigInt(8);function Ue(t,e){const n=t%e;return n>=Ee?n:e+n}function Ie(t,e,n){if(n<=Ee||e<Ee)throw new Error("Expected power/modulo > 0");if(n===Se)return Ee;let r=Se;for(;e>Ee;)e&Se&&(r=r*t%n),t=t*t%n,e>>=Se;return r}function Be(t,e,n){let r=t;for(;e-- >Ee;)r*=r,r%=n;return r}function Te(t,e){if(t===Ee||e<=Ee)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ue(t,e),r=e,s=Ee,i=Se;for(;n!==Ee;){const t=r%n,e=s-i*(r/n);r=n,n=t,s=i,i=e}if(r!==Se)throw new Error("invert: does not exist");return Ue(s,e)}function Ne(t){if(t%ke===Ae){const e=(t+Se)/ke;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%Pe===Ce){const e=(t-Ce)/Pe;return function(t,n){const r=t.mul(n,Oe),s=t.pow(r,e),i=t.mul(n,s),o=t.mul(t.mul(i,Oe),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Se)/Oe;let n,r,s;for(n=t-Se,r=0;n%Oe===Ee;n/=Oe,r++);for(s=Oe;s<t&&Ie(s,e,t)!==t-Se;s++);if(1===r){const e=(t+Se)/ke;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+Se)/Oe;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,u=t.pow(t.mul(t.ONE,s),n),c=t.pow(o,i),f=t.pow(o,n);for(;!t.eql(f,t.ONE);){if(t.eql(f,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(f);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(u,Se<<BigInt(a-e-1));u=t.sqr(n),c=t.mul(c,n),f=t.mul(f,u),a=e}return c}}(t)}BigInt(9),BigInt(16);const Le=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ze(t){return _e(t,Le.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function Re(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function je(t,e,n=!1,r={}){if(t<=Ee)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Re(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ne(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:ye(s),ZERO:Ee,ONE:Se,create:e=>Ue(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Ee<=e&&e<t},is0:t=>t===Ee,isOdd:t=>(t&Se)===Se,neg:e=>Ue(-e,t),eql:(t,e)=>t===e,sqr:e=>Ue(e*e,t),add:(e,n)=>Ue(e+n,t),sub:(e,n)=>Ue(e-n,t),mul:(e,n)=>Ue(e*n,t),pow:(t,e)=>function(t,e,n){if(n<Ee)throw new Error("Expected power > 0");if(n===Ee)return t.ONE;if(n===Se)return e;let r=t.ONE,s=e;for(;n>Ee;)n&Se&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Se;return r}(a,t,e),div:(e,n)=>Ue(e*Te(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Te(e,t),sqrt:r.sqrt||(t=>o(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,s)=>t.is0(r)?e:(n[s]=e,t.mul(e,r))),t.ONE),s=t.inv(r);return e.reduceRight(((e,r,s)=>t.is0(r)?e:(n[s]=t.mul(e,n[s]),t.mul(e,r))),s),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?de(t,i):he(t,i),fromBytes:t=>{if(t.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${t.length}`);return n?fe(t):ce(t)}});return Object.freeze(a)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const He=BigInt(0),$e=BigInt(1);function De(t){return Ze(t.Fp),_e(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Re(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const{bytesToNumberBE:Fe,hexToBytes:ze}=xe,Ke={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=Ke;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new e("Invalid signature integer: trailing length");return{d:Fe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ke,n="string"==typeof t?ze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Ke._parseInt(n.subarray(2)),{d:o,l:a}=Ke._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=t=>Number.parseInt(t[0],16)>=8?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),u=n(o);return`30${n(o+i+4)}02${u}${s}02${a}${r}`}},Ve=BigInt(0),qe=BigInt(1),Me=BigInt(2),Ge=BigInt(3),We=BigInt(4);function Ye(t){const e=function(t){const e=De(t);_e(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const s=e.toAffine();return pe(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function i(t){const{a:r,b:s}=e,i=n.sqr(t),o=n.mul(i,t);return n.add(n.add(o,n.mul(t,r)),s)}function o(t){return"bigint"==typeof t&&Ve<t&&t<e.n}function a(t){if(!o(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=ie(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let o;try{o="bigint"==typeof t?t:ce(le("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return s&&(o=Ue(o,i)),a(o),o}const c=new Map;function f(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const s=t=>n.eql(t,n.ZERO);return s(e)&&s(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(s(le("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(u(t))}_setWindowSize(t){this._WINDOW_SIZE=t,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const s=n.sqr(r),o=i(t);if(!n.eql(s,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){f(t);const{px:e,py:r,pz:s}=this,{px:i,py:o,pz:a}=t,u=n.eql(n.mul(e,a),n.mul(i,s)),c=n.eql(n.mul(r,a),n.mul(o,s));return u&&c}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,s=n.mul(r,Ge),{px:i,py:o,pz:a}=this;let u=n.ZERO,c=n.ZERO,f=n.ZERO,d=n.mul(i,i),l=n.mul(o,o),p=n.mul(a,a),g=n.mul(i,o);return g=n.add(g,g),f=n.mul(i,a),f=n.add(f,f),u=n.mul(t,f),c=n.mul(s,p),c=n.add(u,c),u=n.sub(l,c),c=n.add(l,c),c=n.mul(u,c),u=n.mul(g,u),f=n.mul(s,f),p=n.mul(t,p),g=n.sub(d,p),g=n.mul(t,g),g=n.add(g,f),f=n.add(d,d),d=n.add(f,d),d=n.add(d,p),d=n.mul(d,g),c=n.add(c,d),p=n.mul(o,a),p=n.add(p,p),d=n.mul(p,g),u=n.sub(u,d),f=n.mul(p,l),f=n.add(f,f),f=n.add(f,f),new h(u,c,f)}add(t){f(t);const{px:r,py:s,pz:i}=this,{px:o,py:a,pz:u}=t;let c=n.ZERO,d=n.ZERO,l=n.ZERO;const p=e.a,g=n.mul(e.b,Ge);let y=n.mul(r,o),m=n.mul(s,a),w=n.mul(i,u),b=n.add(r,s),v=n.add(o,a);b=n.mul(b,v),v=n.add(y,m),b=n.sub(b,v),v=n.add(r,i);let _=n.add(o,u);return v=n.mul(v,_),_=n.add(y,w),v=n.sub(v,_),_=n.add(s,i),c=n.add(a,u),_=n.mul(_,c),c=n.add(m,w),_=n.sub(_,c),l=n.mul(p,v),c=n.mul(g,w),l=n.add(c,l),c=n.sub(m,l),l=n.add(m,l),d=n.mul(c,l),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),v=n.mul(g,v),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),v=n.add(v,w),y=n.mul(m,v),d=n.add(d,y),y=n.mul(_,v),c=n.mul(b,c),c=n.sub(c,y),y=n.mul(b,m),l=n.mul(_,l),l=n.add(l,y),new h(c,d,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return l.wNAFCached(this,c,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===Ve)return r;if(a(t),t===qe)return this;const{endo:s}=e;if(!s)return l.unsafeLadder(this,t);let{k1neg:i,k1:o,k2neg:u,k2:c}=s.splitScalar(t),f=r,d=r,p=this;for(;o>Ve||c>Ve;)o&qe&&(f=f.add(p)),c&qe&&(d=d.add(p)),p=p.double(),o>>=qe,c>>=qe;return i&&(f=f.negate()),u&&(d=d.negate()),d=new h(n.mul(d.px,s.beta),d.py,d.pz),f.add(d)}multiply(t){a(t);let r,s,i=t;const{endo:o}=e;if(o){const{k1neg:t,k1:e,k2neg:a,k2:u}=o.splitScalar(i);let{p:c,f:f}=this.wNAF(e),{p:d,f:p}=this.wNAF(u);c=l.constTimeNegate(t,c),d=l.constTimeNegate(a,d),d=new h(n.mul(d.px,o.beta),d.py,d.pz),r=c.add(d),s=f.add(p)}else{const{p:t,f:e}=this.wNAF(i);r=t,s=e}return h.normalizeZ([r,s])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,s=(t,e)=>e!==Ve&&e!==qe&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),i=s(this,e).add(s(t,n));return i.is0()?void 0:i}toAffine(t){const{px:e,py:r,pz:s}=this,i=this.is0();null==t&&(t=i?n.ONE:n.inv(s));const o=n.mul(e,t),a=n.mul(r,t),u=n.mul(s,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===qe)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===qe?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return ie(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,l=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,s=e;for(;n>He;)n&$e&&(r=r.add(s)),s=s.double(),n>>=$e;return r},precomputeWindow(t,e){const{windows:n,windowSize:s}=r(e),i=[];let o=t,a=o;for(let t=0;t<n;t++){a=o,i.push(a);for(let t=1;t<s;t++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(e,s,i){const{windows:o,windowSize:a}=r(e);let u=t.ZERO,c=t.BASE;const f=BigInt(2**e-1),h=2**e,d=BigInt(e);for(let t=0;t<o;t++){const e=t*a;let r=Number(i&f);i>>=d,r>a&&(r-=h,i+=$e);const o=e,l=e+Math.abs(r)-1,p=t%2!=0,g=r<0;0===r?c=c.add(n(p,s[o])):u=u.add(n(g,s[l]))}return{p:u,f:c}},wNAFCached(t,e,n,r){const s=t._WINDOW_SIZE||1;let i=e.get(t);return i||(i=this.precomputeWindow(t,s),1!==s&&e.set(t,r(i))),this.wNAF(s,i,n)}}}(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function Je(t){const e=function(t){const e=De(t);return _e(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(t){return Ue(t,r)}function a(t){return Te(t,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:f,isWithinCurveOrder:h}=Ye({...e,toBytes(t,e,r){const s=e.toAffine(),i=n.toBytes(s.x),o=pe;return r?o(Uint8Array.from([e.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(t){const e=t.length,r=t[0],o=t.subarray(1);if(e!==s||2!==r&&3!==r){if(e===i&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${e} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const t=ce(o);if(!(Ve<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=f(t);let s=n.sqrt(e);return!(1&~r)!==((s&qe)===qe)&&(s=n.neg(s)),{x:t,y:s}}var a}}),d=t=>ie(he(t,e.nByteLength));function l(t){return t>r>>qe}const p=(t,e,n)=>ce(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=le("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=Ke.toSig(le("DER",t));return new g(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:r,s:s,recovery:i}=this,c=b(le("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const f=2===i||3===i?r+e.n:r;if(f>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&i?"03":"02",l=u.fromHex(h+d(f)),p=a(f),g=o(-c*p),y=o(s*p),m=u.BASE.multiplyAndAddUnsafe(l,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ue(this.toDERHex())}toDERHex(){return Ke.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ue(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const y={isValidPrivateKey(t){try{return c(t),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const t=function(t,e,n=!1){const r=(t=le("privateHash",t)).length,s=Re(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);return Ue(n?fe(t):ce(t),e-Se)+Se}(e.randomBytes(n.BYTES+8),r);return he(t,e.nByteLength)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===s||r===i:n?r===2*s||r===2*i:t instanceof u}const w=e.bits2int||function(t){const n=ce(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},b=e.bits2int_modN||function(t){return o(w(t))},v=ye(e.nBitLength);function _(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(Ve<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return he(t,e.nByteLength)}function x(t,r,s=E){if(["recovered","canonical"].some((t=>t in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:f}=e;let{lowS:d,prehash:p,extraEntropy:y}=s;null==d&&(d=!0),t=le("msgHash",t),p&&(t=le("prehashed msgHash",i(t)));const m=b(t),v=c(r),x=[_(v),_(m)];if(null!=y){const t=!0===y?f(n.BYTES):y;x.push(le("extraEntropy",t,n.BYTES))}const S=pe(...x),O=m;return{seed:S,k2sig:function(t){const e=w(t);if(!h(e))return;const n=a(e),r=u.BASE.multiply(e).toAffine(),s=o(r.x);if(s===Ve)return;const i=o(n*o(O+s*v));if(i===Ve)return;let c=(r.x===s?0:2)|Number(r.y&qe),f=i;return d&&l(i)&&(f=function(t){return l(t)?o(-t):t}(i),c^=1),new g(s,f,c)}}}const E={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(c(t)).toRawBytes(n)},sign:function(t,n,r=E){const{seed:s,k2sig:i}=x(t,n,r);return be(e.hash.outputLen,e.nByteLength,e.hmac)(s,i)},verify:function(t,n,r,s=S){const i=t;if(n=le("msgHash",n),r=le("publicKey",r),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:f}=s;let h,d;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(t){if(!(t instanceof Ke.Err))throw t;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:t,s:e}=i;h=new g(t,e)}}d=u.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&h.hasHighS())return!1;f&&(n=e.hash(n));const{r:l,s:p}=h,y=b(n),m=a(p),w=o(y*m),v=o(l*m),_=u.BASE.multiplyAndAddUnsafe(d,w,v)?.toAffine();return!!_&&o(_.x)===l},ProjectivePoint:u,Signature:g,utils:y}}let Qe=class extends zt{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,jt.hash(t);const n=Ft(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return jt.exists(this),this.iHash.update(t),this}digestInto(t){jt.exists(this),jt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return t.finished=r,t.destroyed=s,t.blockLen=i,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Xe=(t,e,n)=>new Qe(t,e).update(n).digest();
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function tn(t){return{hash:t,hmac:(e,...n)=>Xe(t,e,function(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const s=t[e];n.set(s,r),r+=s.length}return n}(...n)),randomBytes:Vt}}Xe.create=(t,e)=>new Qe(t,e);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const en=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),nn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rn=BigInt(1),sn=BigInt(2),on=(t,e)=>(t+e/sn)/e;function an(t){const e=en,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,f=c*c*t%e,h=Be(f,n,e)*f%e,d=Be(h,n,e)*f%e,l=Be(d,sn,e)*c%e,p=Be(l,s,e)*l%e,g=Be(p,i,e)*p%e,y=Be(g,a,e)*g%e,m=Be(y,u,e)*y%e,w=Be(m,a,e)*g%e,b=Be(w,n,e)*f%e,v=Be(b,o,e)*p%e,_=Be(v,r,e)*c%e,x=Be(_,sn,e);if(!un.eql(un.sqr(x),t))throw new Error("Cannot find square root");return x}const un=je(en,void 0,void 0,{sqrt:an}),cn=function(t,e){const n=e=>Je({...t,...tn(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:un,n:nn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=nn,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-rn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=on(i*t,e),u=on(-r*t,e);let c=Ue(t-a*n-u*s,e),f=Ue(-a*r-u*i,e);const h=c>o,d=f>o;if(h&&(c=e-c),d&&(f=e-f),c>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:d,k2:f}}}},Xt),fn=BigInt(0),hn=t=>"bigint"==typeof t&&fn<t&&t<en,dn={};function ln(t,...e){let n=dn[t];if(void 0===n){const e=Xt(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=pe(e,e),dn[t]=n}return Xt(pe(n,...e))}const pn=t=>t.toRawBytes(!0).slice(1),gn=t=>he(t,32),yn=t=>Ue(t,en),mn=t=>Ue(t,nn),wn=cn.ProjectivePoint;function bn(t){let e=cn.utils.normPrivateKeyToScalar(t),n=wn.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:mn(-e),bytes:pn(n)}}function vn(t){if(!hn(t))throw new Error("bad x: need 0 < x < p");const e=yn(t*t);let n=an(yn(e*t+BigInt(7)));n%sn!==fn&&(n=yn(-n));const r=new wn(t,n,rn);return r.assertValidity(),r}function _n(...t){return mn(ce(ln("BIP0340/challenge",...t)))}function xn(t,e,n){const r=le("signature",t,64),s=le("message",e),i=le("publicKey",n,32);try{const t=vn(ce(i)),e=ce(r.subarray(0,32));if(!hn(e))return!1;const n=ce(r.subarray(32,64));if(!("bigint"==typeof(c=n)&&fn<c&&c<nn))return!1;const f=_n(gn(e),pn(t),s),h=(o=t,a=n,u=mn(-f),wn.BASE.multiplyAndAddUnsafe(o,a,u));return!(!h||!h.hasEvenY()||h.toAffine().x!==e)}catch(t){return!1}var o,a,u,c}const En={getPublicKey:function(t){return bn(t).bytes},sign:function(t,e,n=Vt(32)){const r=le("message",t),{bytes:s,scalar:i}=bn(e),o=le("auxRand",n,32),a=gn(i^ce(ln("BIP0340/aux",o))),u=ln("BIP0340/nonce",a,s,r),c=mn(ce(u));if(c===fn)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=bn(c),d=_n(f,s,r),l=new Uint8Array(64);if(l.set(f,0),l.set(gn(mn(h+d*i)),32),!xn(l,r,s))throw new Error("sign: Invalid signature produced");return l},verify:xn,utils:{randomPrivateKey:cn.utils.randomPrivateKey,lift_x:vn,pointToBytes:pn,numberToBytesBE:he,bytesToNumberBE:ce,taggedHash:ln,mod:Ue}},Sn=function(t,e){const n=e.map((t=>Array.from(t).reverse()));return(e,r)=>{const[s,i,o,a]=n.map((n=>n.reduce(((n,r)=>t.add(t.mul(n,e),r)))));return e=t.div(s,i),r=t.mul(r,t.div(o,a)),{x:e,y:r}}}(un,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((t=>t.map((t=>BigInt(t)))))),On=function(t,e){if(Ze(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=function(t,e){const n=t.ORDER;let r=Ve;for(let t=n-qe;t%Me===Ve;t/=Me)r+=qe;const s=r,i=(n-qe)/Me**s,o=(i-qe)/Me,a=Me**s-qe,u=Me**(s-qe),c=t.pow(e,i),f=t.pow(e,(i+qe)/Me);let h=(e,n)=>{let r=c,i=t.pow(n,a),h=t.sqr(i);h=t.mul(h,n);let d=t.mul(e,h);d=t.pow(d,o),d=t.mul(d,i),i=t.mul(d,n),h=t.mul(d,e);let l=t.mul(h,i);d=t.pow(l,u);let p=t.eql(d,t.ONE);i=t.mul(h,f),d=t.mul(l,r),h=t.cmov(i,h,p),l=t.cmov(d,l,p);for(let e=s;e>1;e--){let n=Me**(e-Me),s=t.pow(l,n);const o=t.eql(s,t.ONE);i=t.mul(h,r),r=t.mul(r,r),s=t.mul(l,r),h=t.cmov(i,h,o),l=t.cmov(s,l,o)}return{isValid:p,value:h}};if(t.ORDER%We===Ge){const n=(t.ORDER-Ge)/We,r=t.sqrt(t.neg(e));h=(e,s)=>{let i=t.sqr(s);const o=t.mul(e,s);i=t.mul(i,o);let a=t.pow(i,n);a=t.mul(a,o);const u=t.mul(a,r),c=t.mul(t.sqr(a),s),f=t.eql(c,e);return{isValid:f,value:t.cmov(u,a,f)}}}return h}(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,u,c,f,h;s=t.sqr(r),s=t.mul(s,e.Z),i=t.sqr(s),i=t.add(i,s),o=t.add(i,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(i),!t.eql(i,t.ZERO)),a=t.mul(a,e.A),i=t.sqr(o),c=t.sqr(a),u=t.mul(c,e.A),i=t.add(i,u),i=t.mul(i,o),c=t.mul(c,a),u=t.mul(c,e.B),i=t.add(i,u),f=t.mul(s,o);const{isValid:d,value:l}=n(i,c);h=t.mul(s,r),h=t.mul(h,l),f=t.cmov(f,o,d),h=t.cmov(h,l,d);const p=t.isOdd(r)===t.isOdd(h);return h=t.cmov(t.neg(h),h,p),f=t.div(f,a),{x:f,y:h}}}(un,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:un.create(BigInt("-11"))});function An(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function kn(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}!function(t,e){if("function"!=typeof e)throw new Error("mapToCurve() must be defined")}(cn.ProjectivePoint,(t=>{const{x:e,y:n}=On(un.create(t[0]));return Sn(e,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:un.ORDER,m:1,k:128,expand:"xmd",hash:Xt});const Cn={number:An,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:kn,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");An(t.outputLen),An(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){kn(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};var Pn=Cn;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Un=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),In=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Bn(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));let Tn=class{clone(){return this._cloneInto()}};function Nn(t){const e=e=>t().update(Bn(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}let Ln=class extends Tn{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Un(this.buffer)}update(t){Pn.exists(this);const{view:e,buffer:n,blockLen:r}=this,s=(t=Bn(t)).length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o!==r)n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Un(t);for(;r<=s-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pn.exists(this),Pn.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=Un(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)o.setUint32(4*t,c[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return t.length=r,t.pos=o,t.finished=s,t.destroyed=i,r%e&&t.buffer.set(n),t}};const Zn=(t,e,n)=>t&e^t&n^e&n,Rn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hn=new Uint32Array(64);let $n=class extends Ln{constructor(){super(64,32,8,!1),this.A=0|jn[0],this.B=0|jn[1],this.C=0|jn[2],this.D=0|jn[3],this.E=0|jn[4],this.F=0|jn[5],this.G=0|jn[6],this.H=0|jn[7]}get(){const{A:t,B:e,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[t,e,n,r,s,i,o,a]}set(t,e,n,r,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Hn[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Hn[t-15],n=Hn[t-2],r=In(e,7)^In(e,18)^e>>>3,s=In(n,17)^In(n,19)^n>>>10;Hn[t]=s+Hn[t-7]+r+Hn[t-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(In(o,6)^In(o,11)^In(o,25))+((f=o)&a^~f&u)+Rn[t]+Hn[t]|0,h=(In(n,2)^In(n,13)^In(n,22))+Zn(n,r,s)|0;c=u,u=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+h|0}var f;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,r,s,i,o,a,u,c)}roundClean(){Hn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Dn=class extends $n{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Fn=Nn((()=>new $n));function zn(t){if(t>Number.MAX_SAFE_INTEGER)throw new TypeError("Number exceeds safe bounds!")}Nn((()=>new Dn));const{getRandomValues:Kn}=crypto??globalThis.crypto??window.crypto;function Vn(t,e,n="be"){void 0===e&&(e=t.length),function(t,e){if(t.length>e)throw new TypeError(`Data is larger than array size: ${t.length} > ${e}`)}(t,e);const r=new Uint8Array(e).fill(0),s="be"===n?0:e-t.length;return r.set(t,s),r}function qn(t){let e,n=0;const r=t.reduce(((t,e)=>t+e.length),0),s=new Uint8Array(r);for(e=0;e<t.length;e++){const r=t[e];s.set(r,n),n+=r.length}return s}const Mn=new TextEncoder,Gn=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function Wn(t){for(const e of Gn)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function Yn(t){return Fn(Fn(t))}const Jn={encode:function(t,e,n=!1){"string"==typeof t&&(t=Mn.encode(t));const r=Wn(e),s=r.length,i=[];let o,a,u,c="",f=0;for(o=0;o<t.length;o++)for(f=0,a=t[o],c+=a>0||(c.length^o)>0?"":"1";f in i||a>0;)u=i[f],u=u>0?256*u+a:a,a=u/s|0,i[f]=u%s,f++;for(;f-- >0;)c+=r[i[f]];return n&&c.length%4>0?c+"=".repeat(4-c.length%4):c},decode:function(t,e){const n=Wn(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a,u,c=0;for(o=0;o<t.length;o++){if(c=0,a=n.indexOf(t[o]),a<0)throw new Error(`Character range out of bounds: ${a}`);for(a>0||(i.length^o)>0||i.push(0);c in s||a>0;)u=s[c],u=u>0?u*r+a:a,a=u>>8,s[c]=u%256,c++}for(;c-- >0;)i.push(s[c]);return new Uint8Array(i)}},Qn=t=>{const e=function(t){return qn([t,Yn(t).slice(0,4)])}(t);return Jn.encode(e,"base58")},Xn=t=>function(t){const e=t.slice(0,-4),n=t.slice(-4);if(Yn(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}(Jn.decode(t,"base58")),tr="qpzry9x8gf2tvdw0s3jn54khce6mua7l",er=[996825010,642813549,513874426,1027748829,705979059],nr=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function rr(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(33554431&e)<<5^t[n];for(let t=0;t<5;++t)r>>t&1&&(e^=er[t])}return e}function sr(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(31&t.charCodeAt(n));return e}function ir(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,u=(1<<e+n-1)-1;for(const r of t){if(r<0||r>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(r));for(i=(i<<e|r)&u,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function or(t,e,n){const r=e.concat(function(t,e,n){const r=rr(sr(t).concat(e).concat([0,0,0,0,0,0]))^n.const,s=[];for(let t=0;t<6;++t)s.push(r>>5*(5-t)&31);return s}(t,e,n));let s=t+"1";for(let t=0;t<r.length;++t)s+=tr.charAt(r[t]);return s}function ar(t){if(!function(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!r||!s}(t))throw new Error("Encoded string goes out of bounds!");if(!function(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}(t=t.toLowerCase()))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let r=n+1;r<t.length;++r){const n=tr.indexOf(t.charAt(r));if(-1===n)throw new Error("Character idx out of bounds: "+String(r));e.push(n)}const s=nr.find((t=>t.version===e[0]))??nr[0];if(!function(t,e,n){return rr(sr(t).concat(e))===n.const}(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function ur(t){const e=(t=t.toLowerCase()).split("1",1)[0],[n,r]=ar(t),s=ir(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case null===s||i<2||i>40:throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}const cr={encode:function(t,e="bc",n=0){const r=or(e,[n,...ir([...t],8,5)],nr.find((t=>t.version===n))??nr[0]);return ur(r),r},decode:ur,version:function(t){t=t.toLowerCase();const[e,n]=ar(t);return n[0]}},fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",dr=new TextEncoder;function lr(t,e=!1,n=!0){"string"==typeof t&&(t=dr.encode(t));const r=e?hr:fr;let s="",i=0,o=0;for(let e=0;e<t.length;e++)for(o=o<<8|t[e],i+=8;i>=6;)i-=6,s+=r[o>>i&63];if(i>0)for(o<<=6-i,s+=r[63&o];i<6;)s+=n?"=":"",i+=2;return s}function pr(t,e=!1){const n=e||t.includes("-")||t.includes("_")?hr.split(""):fr.split(""),r=(t=t.replace(/=+$/,"")).split("");let s=0,i=0;const o=[];for(let t=0;t<r.length;t++){const e=r[t],a=n.indexOf(e);if(-1===a)throw new Error("Invalid character: "+e);s+=6,i<<=6,i|=a,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const gr={encode:lr,decode:pr},yr=t=>lr(t,!0,!1),mr=t=>pr(t,!0),wr=BigInt(0),br=BigInt(255),vr=BigInt(256);function _r(t,e,n="be"){void 0===e&&(e=function(t){if(t<=0xffn)return 1;if(t<=0xffffn)return 2;if(t<=0xffffffffn)return 4;if(t<=0xffffffffffffffffn)return 8;if(t<=0xffffffffffffffffffffffffffffffffn)return 16;if(t<=0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn)return 32;throw new TypeError("Must specify a fixed buffer size for bigints greater than 32 bytes.")}(t));const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(;t>wr;){const e=t&br,n=Number(e);r?i.setUint8(o++,n):i.setUint8(o--,n),t=(t-e)/vr}return new Uint8Array(s)}function xr(t,e,n="be"){void 0===e&&(e=function(t){if(t<=255)return 1;if(t<=65535)return 2;if(t<=4294967295)return 4;throw new TypeError("Numbers larger than 4 bytes must specify a fixed size!")}(t));const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(;t>0;){const e=255&t;r?i.setUint8(o++,t):i.setUint8(o--,t),t=(t-e)/256}return new Uint8Array(s)}const Er=new TextEncoder,Sr=new TextDecoder;function Or(t){return Er.encode(t)}function Ar(t){return Sr.decode(t)}function kr(t,e){!function(t){if(null!==t.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid characters in hex string: "+t);if(t.length%2!=0)throw new Error(`Length of hex string is invalid: ${t.length}`)}(t);const n=t.length/2;if(void 0===e&&(e=n),n>e)throw new TypeError(`Hex string is larger than array size: ${n} > ${e}`);return e}function Cr(t,e,n){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return Vn(t,e,n);if("string"==typeof t)return function(t,e,n="le"){e=kr(t,e);const r="le"===n,s=new ArrayBuffer(e),i=new DataView(s);let o=r?0:e-1;for(let e=0;e<t.length;e+=2){const n=t.substring(e,e+2),s=parseInt(n,16);r?i.setUint8(o++,s):i.setUint8(o--,s)}return new Uint8Array(s)}(t,e,n);if("bigint"==typeof t)return _r(t,e,n);if("number"==typeof t)return xr(t,e,n);if("boolean"==typeof t)return Uint8Array.of(t?1:0);throw TypeError("Unsupported format:"+String(typeof t))}class Pr extends Uint8Array{static{this.num=Ur}static{this.big=Br}static{this.bin=Ir}static{this.raw=Tr}static{this.str=Nr}static{this.hex=Lr}static{this.bytes=Zr}static{this.json=Rr}static{this.base64=jr}static{this.b64url=Hr}static{this.bech32=$r}static{this.b58chk=Dr}static{this.encode=Or}static{this.decode=Ar}static random(t=32){const e=function(t=32){if("function"==typeof Kn)return crypto.getRandomValues(new Uint8Array(t));throw new Error("Crypto module missing getRandomValues!")}(t);return new Pr(e,t)}constructor(t,e,n){super(Cr(t,e,n))}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new Fr(this)}toNum(t="be"){return function(t){let e=0;for(let n=t.length-1;n>=0;n--)e=256*e+t[n],zn(e);return e}("be"===t?this.reverse():this)}toBin(){return function(t){const e=new Array(8*t.length);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let t=7;t>=0;t--,n++)e[n]=r>>t&1}return e.join("")}(this)}toBig(t="be"){return function(t){let e=BigInt(0);for(let n=t.length-1;n>=0;n--)e=e*vr+BigInt(t[n]);return BigInt(e)}("be"===t?this.reverse():this)}toHash(){const t=Fn(this);return new Pr(t)}toJson(){const t=Ar(this);return JSON.parse(t)}toBech32(t,e=0){return cr.encode(this,t,e)}toStr(){return Ar(this)}toHex(){return function(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e}(this)}toBytes(){return new Uint8Array(this)}tob58chk(){return Qn(this)}toBase64(){return gr.encode(this)}toB64url(){return yr(this)}prepend(t){return Pr.join([Pr.bytes(t),this])}append(t){return Pr.join([this,Pr.bytes(t)])}slice(t,e){const n=new Uint8Array(this).slice(t,e);return new Pr(n)}subarray(t,e){const n=new Uint8Array(this).subarray(t,e);return new Pr(n)}reverse(){const t=new Uint8Array(this).reverse();return new Pr(t)}write(t,e){const n=Pr.bytes(t);this.set(n,e)}prefixSize(t){const e=Pr.varInt(this.length,t);return Pr.join([e,this])}static from(t){return new Pr(Uint8Array.from(t))}static of(...t){return new Pr(Uint8Array.of(...t))}static join(t){const e=qn(t.map((t=>Pr.bytes(t))));return new Pr(e)}static varInt(t,e){if(t<253)return Pr.num(t,1);if(t<65536)return Pr.of(253,...Pr.num(t,2,e));if(t<4294967296)return Pr.of(254,...Pr.num(t,4,e));if(BigInt(t)<0x10000000000000000n)return Pr.of(255,...Pr.num(t,8,e));throw new Error(`Value is too large: ${t}`)}}function Ur(t,e,n){return new Pr(t,e,n)}function Ir(t,e,n){return new Pr(function(t){const e=t.split("").map(Number);if(e.length%8!=0)throw new Error(`Binary array is invalid length: ${t.length}`);const n=new Uint8Array(e.length/8);for(let t=0,r=0;t<e.length;t+=8,r++){let s=0;for(let n=0;n<8;n++)s|=e[t+n]<<7-n;n[r]=s}return n}(t),e,n)}function Br(t,e,n){return new Pr(t,e,n)}function Tr(t,e,n){return new Pr(t,e,n)}function Nr(t,e,n){return new Pr(Or(t),e,n)}function Lr(t,e,n){return new Pr(t,e,n)}function Zr(t,e,n){return new Pr(t,e,n)}function Rr(t){return new Pr((e=t,Or(JSON.stringify(e,((t,e)=>"bigint"==typeof e?`${e}n`:e)))));var e}function jr(t){return new Pr(gr.decode(t))}function Hr(t){return new Pr(mr(t))}function $r(t){return new Pr(cr.decode(t))}function Dr(t){return new Pr(Xn(t))}class Fr{constructor(t){this.data=Pr.bytes(t),this.size=this.data.length}peek(t){if(t>this.size)throw new Error(`Size greater than stream: ${t} > ${this.size}`);return new Pr(this.data.slice(0,t))}read(t){t=t??this.readSize();const e=this.peek(t);return this.data=this.data.slice(t),this.size=this.data.length,e}readSize(t){const e=this.read(1).num;switch(!0){case e>=0&&e<253:return e;case 253===e:return this.read(2).toNum(t);case 254===e:return this.read(4).toNum(t);case 255===e:return this.read(8).toNum(t);default:throw new Error(`Varint is out of range: ${e}`)}}}const zr=cn.CURVE,Kr=zr.n,Vr=zr.p,qr={x:zr.Gx,y:zr.Gy},Mr=BigInt(0),Gr=BigInt(1),Wr=BigInt(2),Yr=BigInt(3),Jr=BigInt(4),Qr={N:Kr,P:Vr,G:qr,_0n:Mr,_1n:Gr,_2n:Wr,_3n:Yr,_4n:Jr},Xr=je(Kr,32,!0),ts=t=>Ue(t,Kr);function es(t,e=!1){if(e)throw new Error(t);return!1}function ns(t){return Pr.random(t)}var rs=Object.freeze({__proto__:null,fail:es,mod_bytes:function(t){const e=Pr.bytes(t).big;return Pr.big(ts(e),32)},random:ns});const{N:ss,P:is,_0n:os}=Qr;const as=cn.ProjectivePoint;class us extends Uint8Array{static{this.N=cn.CURVE.n}static mod(t){return new us(t)}static is_valid(t,e){return function(t,e){return"bigint"==typeof t&&os<t&&t<ss||es("x value is not in the field!",e),!0}(Pr.bytes(t,32).big,e)}constructor(t){let e=function(t){if(t instanceof us)return t.big;if(t instanceof cs)return t.x.big;if(t instanceof Uint8Array)return Pr.raw(t).big;if("string"==typeof t)return Pr.hex(t).big;if("number"==typeof t)return Pr.num(t).big;if("bigint"==typeof t)return BigInt(t);throw TypeError("Invalid input type:"+typeof t)}(t);e=ts(e),us.is_valid(e,!0),super(Pr.big(e,32),32)}get buff(){return new Pr(this)}get raw(){return this.buff.raw}get big(){return this.buff.big}get hex(){return this.buff.hex}get point(){return this.generate()}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(t){return new us(t).big>this.big}lt(t){return new us(t).big<this.big}eq(t){return new us(t).big===this.big}ne(t){return new us(t).big!==this.big}add(t){const e=us.mod(t),n=Xr.add(this.big,e.big);return new us(n)}sub(t){const e=us.mod(t),n=Xr.sub(this.big,e.big);return new us(n)}mul(t){const e=us.mod(t),n=Xr.mul(this.big,e.big);return new us(n)}pow(t){const e=us.mod(t),n=Xr.pow(this.big,e.big);return new us(n)}div(t){const e=us.mod(t),n=Xr.div(this.big,e.big);return new us(n)}negate(){return new us(us.N-this.big)}generate(){const t=cn.ProjectivePoint.BASE.multiply(this.big);return cs.import(t)}}class cs{static{this.P=Qr.P}static{this.G=Qr.G}static{this.base=cn.ProjectivePoint.BASE}static from_x(t){let e=function(t){if(t instanceof us)return t.point.buff;if(t instanceof cs)return t.buff;if(t instanceof Uint8Array||"string"==typeof t)return Pr.bytes(t);if("number"==typeof t||"bigint"==typeof t)return Pr.bytes(t,32);throw new TypeError("Unknown type: "+typeof t)}(t);32===e.length&&(e=e.prepend(2)),function(t,e,n){const r=Pr.bytes(t);r.length===e||es(`Invalid byte size: ${r.hex} !== ${e}`,n)}(e,33);const n=as.fromHex(e.hex);return n.assertValidity(),new cs(n.x,n.y)}static generate(t){const e=us.mod(t),n=cs.base.multiply(e.big);return cs.import(n)}static import(t){const e=t instanceof cs?{x:t.x.big,y:t.y.big}:{x:t.x,y:t.y};return new cs(e.x,e.y)}constructor(t,e){this._p=new as(t,e,1n),this.p.assertValidity()}get p(){return this._p}get x(){return Pr.big(this.p.x,32)}get y(){return Pr.big(this.p.y,32)}get buff(){return Pr.raw(this.p.toRawBytes(!0))}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get hasEvenY(){return this.p.hasEvenY()}get hasOddY(){return!this.p.hasEvenY()}eq(t){const e=t instanceof cs?t:cs.from_x(t);return this.x.big===e.x.big&&this.y.big===e.y.big}add(t){return t instanceof cs?cs.import(this.p.add(t.p)):cs.import(this.p.add(cs.generate(t).p))}sub(t){return t instanceof cs?cs.import(this.p.subtract(t.p)):cs.import(this.p.subtract(cs.generate(t).p))}mul(t){return t instanceof cs?cs.import(this.p.multiply(t.x.big)):cs.import(this.p.multiply(us.mod(t).big))}negate(){return cs.import(this.p.negate())}}function fs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function hs(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const ds={number:fs,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:hs,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");fs(t.outputLen),fs(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){hs(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};var ls=ds;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ps=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),gs=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function ys(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!(t instanceof Uint8Array))throw new Error("expected Uint8Array, got "+typeof t);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));class ms{clone(){return this._cloneInto()}}function ws(t){const e=e=>t().update(ys(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class bs extends ms{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ps(this.buffer)}update(t){ls.exists(this);const{view:e,buffer:n,blockLen:r}=this,s=(t=ys(t)).length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o!==r)n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=ps(t);for(;r<=s-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){ls.exists(this),ls.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),u=r?4:0,c=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=ps(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)o.setUint32(4*t,c[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return t.length=r,t.pos=o,t.finished=s,t.destroyed=i,r%e&&t.buffer.set(n),t}}const vs=(t,e,n)=>t&e^t&n^e&n,_s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Es=new Uint32Array(64);class Ss extends bs{constructor(){super(64,32,8,!1),this.A=0|xs[0],this.B=0|xs[1],this.C=0|xs[2],this.D=0|xs[3],this.E=0|xs[4],this.F=0|xs[5],this.G=0|xs[6],this.H=0|xs[7]}get(){const{A:t,B:e,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[t,e,n,r,s,i,o,a]}set(t,e,n,r,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Es[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Es[t-15],n=Es[t-2],r=gs(e,7)^gs(e,18)^e>>>3,s=gs(n,17)^gs(n,19)^n>>>10;Es[t]=s+Es[t-7]+r+Es[t-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(gs(o,6)^gs(o,11)^gs(o,25))+((f=o)&a^~f&u)+_s[t]+Es[t]|0,h=(gs(n,2)^gs(n,13)^gs(n,22))+vs(n,r,s)|0;c=u,u=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+h|0}var f;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,r,s,i,o,a,u,c)}roundClean(){Es.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Os extends Ss{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const As=ws((()=>new Ss));ws((()=>new Os));const ks=BigInt(2**32-1),Cs=BigInt(32);function Ps(t,e=!1){return e?{h:Number(t&ks),l:Number(t>>Cs&ks)}:{h:0|Number(t>>Cs&ks),l:0|Number(t&ks)}}var Us={fromBig:Ps,split:function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Ps(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]},toBig:(t,e)=>BigInt(t>>>0)<<Cs|BigInt(e>>>0),shrSH:(t,e,n)=>t>>>n,shrSL:(t,e,n)=>t<<32-n|e>>>n,rotrSH:(t,e,n)=>t>>>n|e<<32-n,rotrSL:(t,e,n)=>t<<32-n|e>>>n,rotrBH:(t,e,n)=>t<<64-n|e>>>n-32,rotrBL:(t,e,n)=>t>>>n-32|e<<64-n,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,n)=>t<<n|e>>>32-n,rotlSL:(t,e,n)=>e<<n|t>>>32-n,rotlBH:(t,e,n)=>e<<n-32|t>>>64-n,rotlBL:(t,e,n)=>t<<n-32|e>>>64-n,add:function(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:0|s}},add3L:(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),add3H:(t,e,n,r)=>e+n+r+(t/2**32|0)|0,add4L:(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),add4H:(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,add5H:(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,add5L:(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0)};const[Is,Bs]=Us.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Ts=new Uint32Array(80),Ns=new Uint32Array(80);class Ls extends bs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:u,El:c,Fh:f,Fl:h,Gh:d,Gl:l,Hh:p,Hl:g}=this;return[t,e,n,r,s,i,o,a,u,c,f,h,d,l,p,g]}set(t,e,n,r,s,i,o,a,u,c,f,h,d,l,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|f,this.Fl=0|h,this.Gh=0|d,this.Gl=0|l,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)Ts[n]=t.getUint32(e),Ns[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|Ts[t-15],n=0|Ns[t-15],r=Us.rotrSH(e,n,1)^Us.rotrSH(e,n,8)^Us.shrSH(e,n,7),s=Us.rotrSL(e,n,1)^Us.rotrSL(e,n,8)^Us.shrSL(e,n,7),i=0|Ts[t-2],o=0|Ns[t-2],a=Us.rotrSH(i,o,19)^Us.rotrBH(i,o,61)^Us.shrSH(i,o,6),u=Us.rotrSL(i,o,19)^Us.rotrBL(i,o,61)^Us.shrSL(i,o,6),c=Us.add4L(s,u,Ns[t-7],Ns[t-16]),f=Us.add4H(c,r,a,Ts[t-7],Ts[t-16]);Ts[t]=0|f,Ns[t]=0|c}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:u,Dl:c,Eh:f,El:h,Fh:d,Fl:l,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let t=0;t<80;t++){const e=Us.rotrSH(f,h,14)^Us.rotrSH(f,h,18)^Us.rotrBH(f,h,41),w=Us.rotrSL(f,h,14)^Us.rotrSL(f,h,18)^Us.rotrBL(f,h,41),b=f&d^~f&p,v=h&l^~h&g,_=Us.add5L(m,w,v,Bs[t],Ns[t]),x=Us.add5H(_,y,e,b,Is[t],Ts[t]),E=0|_,S=Us.rotrSH(n,r,28)^Us.rotrBH(n,r,34)^Us.rotrBH(n,r,39),O=Us.rotrSL(n,r,28)^Us.rotrBL(n,r,34)^Us.rotrBL(n,r,39),A=n&s^n&o^s&o,k=r&i^r&a^i&a;y=0|p,m=0|g,p=0|d,g=0|l,d=0|f,l=0|h,({h:f,l:h}=Us.add(0|u,0|c,0|x,0|E)),u=0|o,c=0|a,o=0|s,a=0|i,s=0|n,i=0|r;const C=Us.add3L(E,O,k);n=Us.add3H(C,x,S,A),r=0|C}({h:n,l:r}=Us.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=Us.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=Us.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:u,l:c}=Us.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:f,l:h}=Us.add(0|this.Eh,0|this.El,0|f,0|h)),({h:d,l:l}=Us.add(0|this.Fh,0|this.Fl,0|d,0|l)),({h:p,l:g}=Us.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=Us.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(n,r,s,i,o,a,u,c,f,h,d,l,p,g,y,m)}roundClean(){Ts.fill(0),Ns.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Zs extends Ls{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Rs extends Ls{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class js extends Ls{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Hs=ws((()=>new Ls));ws((()=>new Zs)),ws((()=>new Rs)),ws((()=>new js));const $s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ds=Uint8Array.from({length:16},((t,e)=>e)),Fs=Ds.map((t=>(9*t+5)%16));let zs=[Ds],Ks=[Fs];for(let t=0;t<4;t++)for(let e of[zs,Ks])e.push(e[t].map((t=>$s[t])));const Vs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),qs=zs.map(((t,e)=>t.map((t=>Vs[e][t])))),Ms=Ks.map(((t,e)=>t.map((t=>Vs[e][t])))),Gs=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ws=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ys=(t,e)=>t<<e|t>>>32-e;function Js(t,e,n,r){return 0===t?e^n^r:1===t?e&n|~e&r:2===t?(e|~n)^r:3===t?e&r|n&~r:e^(n|~r)}const Qs=new Uint32Array(16);class Xs extends bs{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:s}=this;return[t,e,n,r,s]}set(t,e,n,r,s){this.h0=0|t,this.h1=0|e,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(t,e){for(let n=0;n<16;n++,e+=4)Qs[n]=t.getUint32(e,!0);let n=0|this.h0,r=n,s=0|this.h1,i=s,o=0|this.h2,a=o,u=0|this.h3,c=u,f=0|this.h4,h=f;for(let t=0;t<5;t++){const e=4-t,d=Gs[t],l=Ws[t],p=zs[t],g=Ks[t],y=qs[t],m=Ms[t];for(let e=0;e<16;e++){const r=Ys(n+Js(t,s,o,u)+Qs[p[e]]+d,y[e])+f|0;n=f,f=u,u=0|Ys(o,10),o=s,s=r}for(let t=0;t<16;t++){const n=Ys(r+Js(e,i,a,c)+Qs[g[t]]+l,m[t])+h|0;r=h,h=c,c=0|Ys(a,10),a=i,i=n}}this.set(this.h1+o+c|0,this.h2+u+h|0,this.h3+f+r|0,this.h4+n+i|0,this.h0+s+a|0)}roundClean(){Qs.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const ti=ws((()=>new Xs));class ei extends ms{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ls.hash(t);const n=ys(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return ls.exists(this),this.iHash.update(t),this}digestInto(t){ls.exists(this),ls.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return t.finished=r,t.destroyed=s,t.blockLen=i,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ni=(t,e,n)=>new ei(t,e).update(n).digest();function ri(t){const e=Pr.bytes(t);return Pr.raw(As(As(e)))}function si(t){const e=Pr.bytes(t);return Pr.raw(ti(As(e)))}function ii(t){return us.mod(t).buff}function oi(t,e=!1){const n=us.mod(t).point;return e?n.x:n.buff}function ai(t,e){const n=cs.from_x(e),r=us.mod(t);return n.mul(r).buff}ni.create=(t,e)=>new ei(t,e);var ui=Object.freeze({__proto__:null,genSecretKey:function(t=32){return ii(ns(t))},getPublicKey:oi,getSecretKey:ii,getSharedCode:function(t,e,n="ecdh/code"){const r=function(t){const e=Pr.str(t).digest;return Pr.join([e,e])}(n),s=ii(t),i=oi(s),o=Pr.bytes(e),a=ai(s,o),u=[i.hex,o.hex];return u.sort(),function(t,e){const n=Pr.bytes(t),r=Pr.bytes(e);return Pr.raw(ni(Hs,n,r))}(a,Pr.join([r,...u]))},getSharedKey:ai,is_even_pub:function(t){const e=Pr.bytes(t);switch(!0){case 32===e.length:case 33===e.length&&2===e[0]:return!0;case 33===e.length&&3===e[0]:return!1;default:throw new TypeError(`Invalid public key: ${e.hex}`)}},xonly_pub:function(t){const e=Pr.bytes(t);switch(e.length){case 32:return e;case 33:return e.slice(1,33);default:throw new Error(`Invalid key length: ${e.length}`)}}});Pr.random(32);const ci={secp:cn,schnorr:En},fi={...ui,...rs};function hi(t){const e=st.bytes(t);return wt(e,33),si(e)}function di(t){return si(Nt.fmt.toBytes(t,!1))}function li(t){return function(t){const e=Pr.bytes(t);return Pr.raw(As(e))}(Nt.fmt.toBytes(t,!1))}function pi(t,e="main"){const n="main"===e?["1"]:["m","n"];for(const e of n)if(t.startsWith(e))return!0;return!1}function gi(t,e="main"){const n=st.bytes(t),r="main"===e?st.num(0):st.num(111);return wt(t,20),n.prepend(r).tob58chk()}const yi={check:pi,encode:gi,decode:function(t,e="main"){if(!pi(t,e))throw new TypeError("Invalid p2pkh address!");return st.b58chk(t).slice(1)},hash:hi,scriptPubKey:function(t){const e=st.bytes(t);return wt(e,20),["OP_DUP","OP_HASH160",e.hex,"OP_EQUALVERIFY","OP_CHECKSIG"]},fromPubKey:function(t,e){return gi(hi(t),e)}};function mi(t,e="main"){const n="main"===e?["3"]:["2"];for(const e of n)if(t.startsWith(e))return!0;return!1}function wi(t,e="main"){const n="main"===e?st.num(5):st.num(196),r=st.bytes(t);return wt(r,20),r.prepend(n).tob58chk()}const bi={check:mi,encode:wi,decode:function(t,e="main"){if(!mi(t,e))throw new TypeError(`Invalid p2sh address for network ${e}:`+t);return st.b58chk(t).slice(1)},hash:di,scriptPubKey:function(t){return["OP_HASH160",st.bytes(t).hex,"OP_EQUAL"]},fromScript:function(t,e){return wi(di(t),e)}},vi={main:"bc",testnet:"tb",signet:"tb",regtest:"bcrt"},_i=["bc1q","tb1q","bcrt1q"];function xi(t){for(const e of _i)if(t.startsWith(e))return!0;return!1}function Ei(t,e="main"){const n=vi[e],r=st.bytes(t);return wt(r,20),r.toBech32(n,0)}const Si={check:xi,encode:Ei,decode:function(t){if(!xi(t))throw new TypeError("Invalid segwit address!");return st.bech32(t)},hash:hi,scriptPubKey:function(t){const e=st.bytes(t);return wt(e,20),["OP_0",e.hex]},fromPubKey:function(t,e){return Ei(hi(t),e)}},Oi=["bc1q","tb1q","bcrt1q"];function Ai(t){for(const e of Oi)if(t.startsWith(e))return!0;return!1}function ki(t,e="main"){const n=vi[e],r=st.bytes(t);return wt(r,32),r.toBech32(n,0)}const Ci={check:Ai,encode:ki,decode:function(t){if(!Ai(t))throw new TypeError("Invalid segwit address!");return st.bech32(t)},hash:li,scriptPubKey:function(t){const e=st.bytes(t);return wt(e,32),["OP_0",e.hex]},fromScript:function(t,e){return ki(li(t),e)}};function Pi(t){const e=st.bytes(t);return e.length>32?e.slice(1,33):e}const Ui=["bc1p","tb1p","bcrt1p"];function Ii(t){for(const e of Ui)if(t.startsWith(e))return!0;return!1}function Bi(t,e="main"){const n=vi[e],r=st.bytes(t);return wt(r,32),r.toBech32(n,1)}const Ti={check:Ii,encode:Bi,decode:function(t){if(!Ii(t))throw new TypeError("Invalid taproot address!");return st.bech32(t)},scriptPubKey:function(t){const e=st.bytes(t);return wt(e,32),["OP_1",e.hex]},fromPubKey:function(t,e){return Bi(Pi(t),e)}},Ni={version:2,vin:[],vout:[],locktime:0},Li={scriptSig:[],sequence:4294967293,witness:[]},Zi={value:0n,scriptPubKey:[]};function Ri(t){const e={...Ni,...t};return e.vin=e.vin.map((t=>({...Li,...t}))),e.vout=e.vout.map((t=>({...Zi,...t}))),e}function ji(t,e){const{version:n,vin:r,vout:s,locktime:i}=Ri(t),o=!0!==e&&function(t){for(const e of t){const{witness:t}=e;if("string"==typeof t||t instanceof Uint8Array||Array.isArray(t)&&t.length>0)return!0}return!1}(r),a=[Hi(n)];o&&a.push(st.hex("0001")),a.push(function(t){const e=[st.varInt(t.length,"le")];for(const n of t){const{txid:t,vout:r,scriptSig:s,sequence:i}=n;e.push($i(t)),e.push(Di(r)),e.push(Ct(s,!0)),e.push(Fi(i))}return st.join(e)}(r)),a.push(function(t){const e=[st.varInt(t.length,"le")];for(const n of t)e.push(Ki(n));return st.join(e)}(s));for(const t of r)o&&a.push(Vi(t.witness));return a.push(Mi(i)),st.join(a)}function Hi(t){return st.num(t,4).reverse()}function $i(t){return st.hex(t,32).reverse()}function Di(t){return st.num(t,4).reverse()}function Fi(t){if("string"==typeof t)return st.hex(t,4).reverse();if("number"==typeof t)return st.num(t,4).reverse();throw new Error("Unrecognized format: "+String(t))}function zi(t){if("number"==typeof t){if(t%1!=0)throw new Error("Value must be an integer:"+String(t));return st.num(t,8).reverse()}return st.big(t,8).reverse()}function Ki(t){const{value:e,scriptPubKey:n}=t,r=[];return r.push(zi(e)),r.push(Ct(n,!0)),st.join(r)}function Vi(t=[]){const e=[];if(Array.isArray(t)){const n=st.varInt(t.length);e.push(n);for(const n of t)e.push(qi(n));return st.join(e)}return st.bytes(t)}function qi(t){return function(t){if(Array.isArray(t))return 0===t.length;if("string"==typeof t&&""===t)return!0;const e=st.bytes(t);return 1===e.length&&0===e[0]}(t)?new st(0):Ct(t,!0)}function Mi(t){if("string"==typeof t)return st.hex(t,4);if("number"==typeof t)return st.num(t,4).reverse();throw new Error("Unrecognized format: "+String(t))}function Gi(t){"string"==typeof t&&(t=st.hex(t).raw);const e=new mt(t),n=function(t){return t.read(4).reverse().toNum()}(e),r=function(t){const[e,n]=[...t.peek(2)];if(0===e){if(t.read(2),1===n)return!0;throw new Error(`Invalid witness flag: ${n}`)}return!1}(e),s=function(t){const e=[],n=t.readSize("le");for(let r=0;r<n;r++)e.push(Wi(t));return e}(e),i=function(t){const e=[],n=t.readSize("le");for(let r=0;r<n;r++)e.push(Yi(t));return e}(e);if(r)for(const t of s)t.witness=Ji(e);const o=function(t){return t.read(4).reverse().toNum()}(e);return{version:n,vin:s,vout:i,locktime:o}}function Wi(t){return{txid:t.read(32).reverse().toHex(),vout:t.read(4).reverse().toNum(),scriptSig:Xi(t,!0),sequence:t.read(4).reverse().toHex(),witness:[]}}function Yi(t){return{value:t.read(8).reverse().big,scriptPubKey:Xi(t,!0)}}function Ji(t){const e=[],n=t.readSize();for(let r=0;r<n;r++){const n=Qi(t,!0);e.push(n??"")}return e}function Qi(t,e){const n=!0===e?t.readSize("le"):t.size;return n>0?t.read(n).hex:null}function Xi(t,e){const n=Qi(t,e);return null!==n?n:[]}const to={toBytes:function(t){if(At(t))return Gi(t),st.bytes(t);if("object"==typeof t)return ji(t);throw new Error("Invalid format: "+String(typeof t))},toJson:function(t){if(At(t))return Gi(t);if("object"==typeof t&&!(t instanceof Uint8Array))return ji(t),Ri(t);throw new Error("Invalid format: "+String(typeof t))}},eo=[["p2pkh",/^76a914(?<hash>\w{40})88ac$/],["p2sh",/^a914(?<hash>\w{40})87$/],["p2w-pkh",/^0014(?<hash>\w{40})$/],["p2w-sh",/^0020(?<hash>\w{64})$/],["p2tr",/^5120(?<hash>\w{64})$/]],no=[192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,102,126,128,132,150,152,186,188,190];function ro(t=[]){const e=[...t],n=function(t){let e=t.at(-1);return Ot(e)&&(e=st.hex(e)),t.length>1&&e instanceof Uint8Array&&80===e[0]?(t.pop(),st.raw(e)):null}(e),r=function(t){let e=t.at(-1);return Ot(e)&&(e=st.hex(e)),t.length>1&&e instanceof Uint8Array&&e.length>32&&no.includes(254&e[0])?(t.pop(),st.raw(e)):null}(e),s=function(t){if(t.length>1){const e=t.at(-1);try{const n=Nt.fmt.toBytes(e);return t.pop(),n}catch(t){return null}}return null}(e),i=function(t){const e=[];for(const n of t){if(!(Ot(n)||n instanceof Uint8Array||"number"==typeof n))throw new Error("unrecognized value: "+String(n));e.push(st.bytes(n))}return e}(e);return{annex:n,cblock:r,script:s,params:i}}function so(t){const e=Nt.fmt.toBytes(t,!1).hex;for(const[t,n]of eo){const r=t,{groups:s}=n.exec(e)??{},{hash:i}=s??{};if(Ot(i))return{type:r,data:st.hex(i)}}return{type:"raw",data:st.hex(e)}}const io={create:Ri,encode:ji,decode:Gi,fmt:to,util:{getTxSize:function(t){const e=to.toJson(t),n=ji(e,!0).length,r=ji(e,!1).length,s=3*n+r,i=s%4>0?1:0;return{size:r,bsize:n,vsize:Math.floor(s/4)+i,weight:s}},getTxid:function(t){return ri(ji(to.toJson(t),!0)).reverse().hex},readScriptPubKey:so,readWitness:ro}},oo=[["1","p2pkh","main",20,"base58"],["3","p2sh","main",20,"base58"],["m","p2pkh","testnet",20,"base58"],["n","p2pkh","testnet",20,"base58"],["2","p2sh","testnet",20,"base58"],["bc1q","p2w-pkh","main",20,"bech32"],["tb1q","p2w-pkh","testnet",20,"bech32"],["bcrt1q","p2w-pkh","regtest",20,"bech32"],["bc1q","p2w-sh","main",32,"bech32"],["tb1q","p2w-sh","testnet",32,"bech32"],["bcrt1q","p2w-sh","regtest",32,"bech32"],["bc1p","p2tr","main",32,"bech32m"],["tb1p","p2tr","testnet",32,"bech32m"],["bcrt1p","p2tr","regtest",32,"bech32m"]];function ao(t,e){switch(e){case"base58":return st.b58chk(t).slice(1);case"bech32":case"bech32m":return st.bech32(t);default:throw new Error("Invalid address format: "+e)}}function uo(t){switch(t){case"p2pkh":return yi;case"p2sh":return bi;case"p2w-pkh":return Si;case"p2w-sh":return Ci;case"p2tr":return Ti;default:throw new Error("Invalid address type: "+t)}}function co(t){const[e,n,r]=function(t){for(const e of oo){const[n,r,s,i,o]=e;if(t.startsWith(n)&&ao(t,o).length===i)return e}throw new Error("Invalid address: "+t)}(t),s=uo(n),i=s.decode(t,r);return{prefix:e,type:n,network:r,data:i,script:s.scriptPubKey(i)}}const fo={p2pkh:yi,p2sh:bi,p2wpkh:Si,p2wsh:Ci,p2tr:Ti,decode:co,fromScriptPubKey:function(t,e){const{type:n,data:r}=io.util.readScriptPubKey(t);return uo(n).encode(r,e)},toScriptPubKey:function(t){const{script:e}=co(t);return Nt.fmt.toAsm(e,!1)}},ho=[1,2,3];function lo(t,e,n={}){const{sigflag:r=1}=n,s=!(128&~r),i=r%128;if(!ho.includes(i))throw new Error("Invalid hash type: "+String(r));const o=io.fmt.toJson(t),{version:a,vin:u,vout:c,locktime:f}=o,{txid:h,vout:d,prevout:l,sequence:p}=u[e],{value:g}=l??{};if(void 0===g)throw new Error("Prevout value is empty!");let y=n.script;if(void 0===y&&void 0!==n.pubkey){y=`76a914${si(n.pubkey).hex}88ac`}if(void 0===y)throw new Error("No pubkey / script has been set!");if(Nt.fmt.toAsm(y).includes("OP_CODESEPARATOR"))throw new Error("This library does not currently support the use of OP_CODESEPARATOR in segwit scripts.");const m=[Hi(a),po(u,s),go(u,i,s),$i(h),Di(d),Nt.encode(y,!0),zi(g),Fi(p),yo(c,e,i),Mi(f),st.num(r,4).reverse()];return ri(st.join(m))}function po(t,e){if(!0===e)return st.num(0,32);const n=[];for(const{txid:e,vout:r}of t)n.push($i(e)),n.push(Di(r));return ri(st.join(n))}function go(t,e,n){if(n||1!==e)return st.num(0,32);const r=[];for(const{sequence:e}of t)r.push(Fi(e));return ri(st.join(r))}function yo(t,e,n){const r=[];if(1===n){for(const{value:e,scriptPubKey:n}of t)r.push(zi(e)),r.push(Nt.encode(n,!0));return ri(st.join(r))}if(3===n&&e<t.length){const{value:n,scriptPubKey:s}=t[e];return r.push(zi(n)),r.push(Nt.encode(s,!0)),ri(st.join(r))}return st.num(0,32)}const mo={hash:lo,sign:function(t,e,n,r={}){const{sigflag:s=1}=r,i=lo(e,n,r),o=ci.secp.sign(i,t).toDERRawBytes(!0);return st.join([o,s])},verify:function(t,e,n={}){const r=io.fmt.toJson(t),{throws:s=!1}=n,{witness:i=[]}=r.vin[e],o=io.util.readWitness(i),{script:a,params:u}=o;let c=null;if(u.length<1)return bt("Invalid witness data: "+String(i),s);if(void 0===n.script&&null!==a&&(n.script=a),void 0!==n.pubkey)c=st.bytes(n.pubkey);else{if(!(u.length>1&&33===u[1].length))return bt("No pubkey provided!",s);c=st.bytes(u[1])}const f=Nt.fmt.toParam(u[0]),h=f.slice(0,-1),d=f.slice(-1)[0],l=lo(r,e,{...n,sigflag:d});return!!ci.secp.verify(h,l,c)||bt("Invalid signature!",s)}},wo=[0,1,2,3,129,130,131];function bo(t,e,n={}){const{extension:r,sigflag:s=0,extflag:i=0,key_version:o=0,separator_pos:a=4294967295}=n,u=io.fmt.toJson(t),{version:c,vin:f,vout:h,locktime:d}=u;if(e>=f.length)throw new Error("Index out of bounds: "+String(e));if(!wo.includes(s))throw new Error("Invalid hash type: "+String(s));if(i<0||i>127)throw new Error("Extention flag out of range: "+String(i));const{txid:l,vout:p,sequence:g,witness:y=[]}=f[e],m=!(128&~s),w=function(t){if(void 0===t)return;if(t.length<2)return;let e=t.at(-1);"string"==typeof e&&(e=st.hex(e));if(e instanceof Uint8Array&&80===e[0])return st.raw(e).prefixSize("be").digest;return}(y),b=2*(i+(void 0!==r?1:0))+(void 0!==w?1:0),v=st.str("TapSighash").digest,_=[v,v,st.num(0,1),st.num(s,1),Hi(c),Mi(d)];if(!m){const t=f.map((t=>vo(t)));_.push(function(t){const e=[];for(const{txid:n,vout:r}of t)e.push($i(n)),e.push(Di(r));return st.join(e).digest}(f),function(t){const e=[];for(const{value:n}of t)e.push(zi(n));return st.join(e).digest}(t),function(t){const e=[];for(const{scriptPubKey:n}of t)e.push(Ct(n,!0));return st.join(e).digest}(t),function(t){const e=[];for(const{sequence:n}of t)e.push(Fi(n));return st.join(e).digest}(f))}if(((3&s)<2||(3&s)>3)&&_.push(function(t){const e=[];for(const{value:n,scriptPubKey:r}of t)e.push(zi(n)),e.push(Nt.encode(r,!0));return st.join(e).digest}(h)),_.push(st.num(b,1)),m){const{value:t,scriptPubKey:n}=vo(f[e]);_.push($i(l),Di(p),zi(t),Nt.encode(n,!0),Fi(g))}else _.push(st.num(e,4).reverse());return void 0!==w&&_.push(w),3&~s||_.push(function(t){return st.join([zi(t.value),Nt.encode(t.scriptPubKey,!0)]).digest}(h[e])),void 0!==r&&_.push(st.bytes(r),st.num(o),st.num(a,4,"le")),st.join(_).digest}function vo(t){if(void 0===t.prevout)throw new Error("Prevout data missing for input: "+String(t.txid));return t.prevout}const _o=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,xo=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n;function Eo(t){const e=st.str(t).digest;return st.join([e,e])}function So(t,e=192){return st.join([Eo("TapLeaf"),ko(e),st.bytes(t)]).digest.hex}function Oo(t,e){return e<t&&([t,e]=[e,t]),st.join([Eo("TapBranch"),st.hex(t).raw,st.hex(e).raw]).digest.hex}function Ao(t,e,n=[]){const r=[],s=[];if(t.length<1)throw new Error("Tree is empty!");for(let s=0;s<t.length;s++){const i=t[s];if(Array.isArray(i)){const[t,s,o]=Ao(i,e);e=s,r.push(t);for(const t of o)n.push(t)}else r.push(i)}if(1===r.length)return[r[0],e,n];r.sort(),r.length%2!=0&&r.push(r[r.length-1]);for(let t=0;t<r.length-1;t+=2){const i=Oo(r[t],r[t+1]);s.push(i),"string"==typeof e&&(e===r[t]?(n.push(r[t+1]),e=i):e===r[t+1]&&(n.push(r[t]),e=i))}return Ao(s,e,n)}function ko(t=192){return 254&t}function Co(t,e=new Uint8Array,n=!1){const r=n?new us(t).point.x.raw:Pi(t);return st.join([Eo("TapTweak"),r,st.bytes(e)]).digest}function Po(t,e,n=!1){void 0===e&&(e=new Uint8Array);const r=st.bytes(t),s=Co(t,e,n);return n?Uo(r,s):Io(r,s)}function Uo(t,e){let n=new us(t);return n.point.hasOddY&&(n=n.negate()),st.raw(n.add(e).raw)}function Io(t,e){t=Pi(t);const n=cs.from_x(t).add(e);return st.raw(n.raw)}const Bo=function(){const t=st.hex("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8");return cs.from_x(t.digest).x}(),To=192;function No(t,e={}){const{isPrivate:n=!1,tree:r=[],version:s=To}=e,i=n?fi.getPublicKey(t,!0):Pi(t);let{target:o}=e;void 0!==o&&(o=st.bytes(o).hex);let a,u=[];if(r.length>0){const[e,s,i]=Ao(r,o);u=i,a=Po(t,e,n)}else a=Po(t,void 0!==o?o:void 0,n);const c=n?fi.getPublicKey(a)[0]:a[0],f=[st.num(s+Ro(c)),i];u.length>0&&u.forEach((t=>f.push(st.hex(t))));const h=st.join(f);if(void 0!==o&&!Lo(a,o,h,e))throw new Error("Path checking failed! Unable to generate path.");return[Pi(a).hex,h.hex]}function Lo(t,e,n,r={}){const{isPrivate:s=!1,throws:i=!1}=r,{parity:o,paths:a,intkey:u}=Zo(n),c=s?fi.getPublicKey(t,!0):Pi(t),f=st.join([o,c]);if(33!==f.length)return bt("Invalid tapkey: "+f.hex,i);let h=st.bytes(e).hex;for(const t of a)h=Oo(h,t);const d=Po(u,h);return st.raw(d).hex===st.raw(f).hex}function Zo(t){const e=new mt(st.bytes(t)),n=e.read(1).num,r=e.read(32),[s,i]=n%2==0?[n,2]:[n-1,3],o=[];for(;e.size>=32;)o.push(e.read(32).hex);if(0!==e.size)throw new Error("Non-empty buffer on control block: "+String(e));return{intkey:r,paths:o,parity:i,version:s}}function Ro(t=2){if(0===t||1===t)return t;if(2===t||"02"===t)return 0;if(3===t||"03"===t)return 1;throw new Error("Invalid parity bit: "+String(t))}const jo={hash:bo,sign:function(t,e,n,r={}){const{sigflag:s=0}=r,i=function(t,e,n=st.random(32)){const r=st.bytes(e),s=new us(t),i=s.point,o=i.hasEvenY?s.big:s.negated.big,a=vt("BIP0340/aux",st.bytes(n)),u=vt("BIP0340/nonce",o^a.big,i.x.raw,r),c=new us(u),f=c.point,h=f.hasEvenY?c.big:c.negated.big,d=new us(vt("BIP0340/challenge",f.x.raw,i.x.raw,r)),l=new us(h+d.big*o);return st.join([f.x.raw,l.raw])}(t,bo(e,n,r));return 0===s?st.raw(i):st.join([i,s])},verify:function(t,e,n={}){const r=io.fmt.toJson(t),{throws:s=!1}=n,{prevout:i,witness:o=[]}=r.vin[e],a=io.util.readWitness(o),{cblock:u,script:c,params:f}=a;let h;if(f.length<1)return bt("Invalid witness data: "+String(o),s);const{scriptPubKey:d}=i??{};if(void 0===d)return bt("Prevout scriptPubKey is empty!",s);const{type:l,data:p}=io.util.readScriptPubKey(d);if("p2tr"!==l)return bt("Prevout script is not a valid taproot output:"+p.hex,s);if(32!==p.length)return bt("Invalid tapkey length: "+String(p.length),s);if(null!==u&&null!==c){const t=So(c,254&u[0]);if(n.extension=t,!Lo(p,t,u,{throws:s}))return bt("cblock verification failed!",s)}h=void 0!==n.pubkey?st.bytes(n.pubkey):f.length>1&&32===f[1].length?st.bytes(f[1]):st.bytes(p);const g=Nt.fmt.toParam(f[0]),y=new mt(g),m=y.read(64).raw;return 1===y.size&&(n.sigflag=y.read(1).num,0===n.sigflag)?bt("0x00 is not a valid appended sigflag!",s):!!function(t,e,n,r=!1){const s=cs.from_x(Pi(n)),i=st.bytes(e),o=st.bytes(t).stream;o.size<64&&bt("Signature length is too small: "+String(o.size),r);const a=o.read(32);a.big>_o&&bt("Signature r value greater than field size!",r);const u=o.read(32);u.big>xo&&bt("Signature s value greater than curve order!",r);const c=new us(vt("BIP0340/challenge",a.raw,s.x.raw,i)),f=new us(u).point,h=s.mul(c.big),d=f.sub(h);return d.hasOddY&&bt("Signature R value has odd Y coordinate!",r),0n===d.x.big&&bt("Signature R value is infinite!",r),d.x.big===a.big}(m,bo(r,e,n),h,s)||bt("Invalid signature!",s)}},Ho={segwit:mo,taproot:jo},$o={getTag:Eo,getLeaf:So,getBranch:Oo,getRoot:function(t){return st.hex(Ao(t)[0])}},Do={getPubKey:function(t,e={}){return No(t,{...e,isPrivate:!1})},getSecKey:function(t,e={}){return No(t,{...e,isPrivate:!0})},encodeScript:function(t,e){return So(Nt.fmt.toBytes(t),e)},checkPath:Lo,tree:$o,tweak:{getPubKey:function(t,e){return Po(t,e)},getSecKey:function(t,e){return Po(t,e,!0)},getTweak:Co,tweakSecKey:Uo,tweakPubKey:Io},util:{readCtrlBlock:Zo,readParityBit:Ro},SCRIPT_PUBKEY:Bo};class Fo{constructor(t){this._buff=st.raw(Ct(t))}get raw(){return this._buff.raw}get hex(){return this._buff.hex}get asm(){return Bt(this._buff)}getHash(t,e){switch(t){case"p2w":return ri(this._buff).hex;case"p2sh":return si(this._buff).hex;case"p2tr":return $o.getLeaf(this._buff,e);default:throw new Error("Unrecognized format: "+t)}}toJSON(){return this.asm??[]}}const zo=4294967295,Ko=1<<31,Vo=512;class qo{constructor(t){this.value="string"==typeof t?parseInt(t,16):t}get isReplaceable(){return this.value<zo}get isLocked(){return!(this.value!==zo||this.value&Ko)}get isTimelock(){return!!(4194304&this.value)}get timestamp(){return this.isLocked?this.isTimelock?this.value*Vo:this.value*Vo*600:0}set timestamp(t){this.value=Math.ceil(t/Vo)}get blockheight(){return this.isLocked?this.isTimelock?Math.ceil(this.value*Vo/600):this.value:0}set blockheight(t){this.value=t}get estDate(){return this.isTimelock?new Date(Date.now()+this.value*Vo*1e3):new Date(Date.now()+600*this.value*1e3)}set estDate(t){const e=t.getTime()-Date.now();this.value=e>512e3?Math.ceil(e/1e3/Vo):1}toJSON(){return this.value}}let Mo=class{constructor(t){this.value=BigInt(t.value),this.scriptPubKey=new Fo(t.scriptPubKey)}get type(){const{type:t}=so(this.scriptPubKey.raw);return t}};class Go{constructor(t,e){this._data=t,this._meta=ro(t),this.format=e}get length(){return this._data.length}get annex(){const t=this._meta.annex;return null!==t?st.raw(t).hex:void 0}get cblock(){const t=this._meta.cblock;return null!==t?st.raw(t).hex:void 0}get script(){const t=this._meta.script;return null!==t?Nt.decode(t):void 0}get params(){return this._meta.params}toJSON(){return this._data}}let Wo=class{constructor(t,e){this._tx=t,this.idx=e}get data(){return this._tx.vin[this.idx]}get txid(){return this.data.txid}get vout(){return this.data.vout}get prevout(){return void 0!==this.data.prevout?new Mo(this.data.prevout):void 0}get scriptSig(){return new Fo(this.data.scriptSig)}get sequence(){return new qo(this.data.sequence)}get witness(){return new Go(this.data.witness)}get type(){if(void 0!==this.prevout){const t=this.prevout.scriptPubKey.raw,{type:e}=so(t);if("p2sh"===e){const t=this.scriptSig.asm;if("OP_0"===t[0]){if(20===t[1].length)return"p2w-p2pkh";if(32===t[1].length)return"p2w-p2sh"}return"p2sh"}return e}return"raw"}sign(t,e){if(this.type.startsWith("p2w"))return Ho.segwit.sign(t,this._tx,this.idx,e);if(this.type.startsWith("p2tr"))return Ho.taproot.sign(t,this._tx,this.idx,e);if(this.type.startsWith("p2pkh")||this.type.startsWith("p2sh"))throw new Error("This library does not support signing legacy transactions.");throw new Error("Unable to sign this input type:"+String(this.type))}};class Yo{constructor(t=0){this.value=st.bytes(t).num}get isTimelock(){return this.value>5e8}get timestamp(){return this.isTimelock?this.value:600*this.value}set timestamp(t){this.value=t}get blockheight(){return this.isTimelock?Math.floor(this.value/600):this.value}set blockheight(t){this.value=t}get estDate(){return this.isTimelock?new Date(Date.now()+1e3*this.value):new Date(Date.now()+600*this.value*1e3)}set estDate(t){this.value=Math.floor((t.getTime()-Date.now())/1e3)}toJSON(){return this.value}}var Jo,Qo;!function(t){t.assertEqual=t=>t,t.assertIs=function(t){},t.assertNever=function(t){throw new Error},t.arrayToEnum=t=>{const e={};for(const n of t)e[n]=n;return e},t.getValidEnumValues=e=>{const n=t.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const t of n)r[t]=e[t];return t.objectValues(r)},t.objectValues=e=>t.objectKeys(e).map((function(t){return e[t]})),t.objectKeys="function"==typeof Object.keys?t=>Object.keys(t):t=>{const e=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},t.find=(t,e)=>{for(const n of t)if(e(n))return n},t.isInteger="function"==typeof Number.isInteger?t=>Number.isInteger(t):t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t,t.joinValues=function(t,e=" | "){return t.map((t=>"string"==typeof t?`'${t}'`:t)).join(e)},t.jsonStringifyReplacer=(t,e)=>"bigint"==typeof e?e.toString():e}(Jo||(Jo={})),function(t){t.mergeShapes=(t,e)=>({...t,...e})}(Qo||(Qo={}));const Xo=Jo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ta=t=>{switch(typeof t){case"undefined":return Xo.undefined;case"string":return Xo.string;case"number":return isNaN(t)?Xo.nan:Xo.number;case"boolean":return Xo.boolean;case"function":return Xo.function;case"bigint":return Xo.bigint;case"symbol":return Xo.symbol;case"object":return Array.isArray(t)?Xo.array:null===t?Xo.null:t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch?Xo.promise:"undefined"!=typeof Map&&t instanceof Map?Xo.map:"undefined"!=typeof Set&&t instanceof Set?Xo.set:"undefined"!=typeof Date&&t instanceof Date?Xo.date:Xo.object;default:return Xo.unknown}},ea=Jo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class na extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(t){return t.message},n={_errors:[]},r=t=>{for(const s of t.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)n._errors.push(e(s));else{let t=n,r=0;for(;r<s.path.length;){const n=s.path[r];r===s.path.length-1?(t[n]=t[n]||{_errors:[]},t[n]._errors.push(e(s))):t[n]=t[n]||{_errors:[]},t=t[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof na))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jo.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=t=>t.message){const e={},n=[];for(const r of this.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):n.push(t(r));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}na.create=t=>new na(t);const ra=(t,e)=>{let n;switch(t.code){case ea.invalid_type:n=t.received===Xo.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case ea.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Jo.jsonStringifyReplacer)}`;break;case ea.unrecognized_keys:n=`Unrecognized key(s) in object: ${Jo.joinValues(t.keys,", ")}`;break;case ea.invalid_union:n="Invalid input";break;case ea.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Jo.joinValues(t.options)}`;break;case ea.invalid_enum_value:n=`Invalid enum value. Expected ${Jo.joinValues(t.options)}, received '${t.received}'`;break;case ea.invalid_arguments:n="Invalid function arguments";break;case ea.invalid_return_type:n="Invalid function return type";break;case ea.invalid_date:n="Invalid date";break;case ea.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Jo.assertNever(t.validation):n="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case ea.too_small:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case ea.too_big:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case ea.custom:n="Invalid input";break;case ea.invalid_intersection_types:n="Intersection results could not be merged";break;case ea.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ea.not_finite:n="Number must be finite";break;default:n=e.defaultError,Jo.assertNever(t)}return{message:n}};let sa=ra;function ia(){return sa}const oa=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let a="";const u=r.filter((t=>!!t)).slice().reverse();for(const t of u)a=t(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function aa(t,e){const n=ia(),r=oa({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ra?void 0:ra].filter((t=>!!t))});t.common.issues.push(r)}class ua{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const r of e){if("aborted"===r.status)return ca;"dirty"===r.status&&t.dirty(),n.push(r.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const t of e){const e=await t.key,r=await t.value;n.push({key:e,value:r})}return ua.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const r of e){const{key:e,value:s}=r;if("aborted"===e.status)return ca;if("aborted"===s.status)return ca;"dirty"===e.status&&t.dirty(),"dirty"===s.status&&t.dirty(),"__proto__"===e.value||void 0===s.value&&!r.alwaysSet||(n[e.value]=s.value)}return{status:t.value,value:n}}}const ca=Object.freeze({status:"aborted"}),fa=t=>({status:"dirty",value:t}),ha=t=>({status:"valid",value:t}),da=t=>"aborted"===t.status,la=t=>"dirty"===t.status,pa=t=>"valid"===t.status,ga=t=>"undefined"!=typeof Promise&&t instanceof Promise;function ya(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function ma(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n}var wa,ba,va;"function"==typeof SuppressedError&&SuppressedError,function(t){t.errToObj=t=>"string"==typeof t?{message:t}:t||{},t.toString=t=>"string"==typeof t?t:null==t?void 0:t.message}(wa||(wa={}));class _a{constructor(t,e,n,r){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xa=(t,e)=>{if(pa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new na(t.common.issues);return this._error=e,this._error}}};function Ea(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(e)return{errorMap:e,description:s};return{errorMap:(e,s)=>{var i,o;const{message:a}=t;return"invalid_enum_value"===e.code?{message:null!=a?a:s.defaultError}:void 0===s.data?{message:null!==(i=null!=a?a:r)&&void 0!==i?i:s.defaultError}:"invalid_type"!==e.code?{message:s.defaultError}:{message:null!==(o=null!=a?a:n)&&void 0!==o?o:s.defaultError}},description:s}}class Sa{get description(){return this._def.description}_getType(t){return ta(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:ta(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ua,ctx:{common:t.parent.common,data:t.data,parsedType:ta(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(ga(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){var n;const r={common:{issues:[],async:null!==(n=null==e?void 0:e.async)&&void 0!==n&&n,contextualErrorMap:null==e?void 0:e.errorMap},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ta(t)},s=this._parseSync({data:t,path:r.path,parent:r});return xa(r,s)}"~validate"(t){var e,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ta(t)};if(!this["~standard"].async)try{const e=this._parseSync({data:t,path:[],parent:r});return pa(e)?{value:e.value}:{issues:r.common.issues}}catch(t){(null===(n=null===(e=null==t?void 0:t.message)||void 0===e?void 0:e.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then((t=>pa(t)?{value:t.value}:{issues:r.common.issues}))}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:null==e?void 0:e.errorMap,async:!0},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ta(t)},r=this._parse({data:t,path:n.path,parent:n}),s=await(ga(r)?r:Promise.resolve(r));return xa(n,s)}refine(t,e){const n=t=>"string"==typeof e||void 0===e?{message:e}:"function"==typeof e?e(t):e;return this._refinement(((e,r)=>{const s=t(e),i=()=>r.addIssue({code:ea.custom,...n(e)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then((t=>!!t||(i(),!1))):!!s||(i(),!1)}))}refinement(t,e){return this._refinement(((n,r)=>!!t(n)||(r.addIssue("function"==typeof e?e(n,r):e),!1)))}_refinement(t){return new Su({schema:this,typeName:Ru.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ou.create(this,this._def)}nullable(){return Au.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return iu.create(this)}promise(){return Eu.create(this,this._def)}or(t){return uu.create([this,t],this._def)}and(t){return du.create(this,t,this._def)}transform(t){return new Su({...Ea(this._def),schema:this,typeName:Ru.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e="function"==typeof t?t:()=>t;return new ku({...Ea(this._def),innerType:this,defaultValue:e,typeName:Ru.ZodDefault})}brand(){return new Iu({typeName:Ru.ZodBranded,type:this,...Ea(this._def)})}catch(t){const e="function"==typeof t?t:()=>t;return new Cu({...Ea(this._def),innerType:this,catchValue:e,typeName:Ru.ZodCatch})}describe(t){return new(0,this.constructor)({...this._def,description:t})}pipe(t){return Bu.create(this,t)}readonly(){return Tu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Oa=/^c[^\s-]{8,}$/i,Aa=/^[0-9a-z]+$/,ka=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ca=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pa=/^[a-z0-9_-]{21}$/i,Ua=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ia=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ba=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ta;const Na=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,La=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Za=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ra=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ja=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ha=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$a="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Da=new RegExp(`^${$a}$`);function Fa(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:null==t.precision&&(e=`${e}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t.precision?"+":"?"}`}function za(t){let e=`${$a}T${Fa(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Ka(t,e){if(!Ua.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return"object"==typeof s&&null!==s&&(!(!s.typ||!s.alg)&&(!e||s.alg===e))}catch(t){return!1}}function Va(t,e){return!("v4"!==e&&e||!La.test(t))||!("v6"!==e&&e||!Ra.test(t))}class qa extends Sa{_parse(t){this._def.coerce&&(t.data=String(t.data));if(this._getType(t)!==Xo.string){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.string,received:e.parsedType}),ca}const e=new ua;let n;for(const i of this._def.checks)if("min"===i.kind)t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),e.dirty());else if("max"===i.kind)t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),e.dirty());else if("length"===i.kind){const r=t.data.length>i.value,s=t.data.length<i.value;(r||s)&&(n=this._getOrReturnCtx(t,n),r?aa(n,{code:ea.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&aa(n,{code:ea.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),e.dirty())}else if("email"===i.kind)Ba.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"email",code:ea.invalid_string,message:i.message}),e.dirty());else if("emoji"===i.kind)Ta||(Ta=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ta.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"emoji",code:ea.invalid_string,message:i.message}),e.dirty());else if("uuid"===i.kind)Ca.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"uuid",code:ea.invalid_string,message:i.message}),e.dirty());else if("nanoid"===i.kind)Pa.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"nanoid",code:ea.invalid_string,message:i.message}),e.dirty());else if("cuid"===i.kind)Oa.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"cuid",code:ea.invalid_string,message:i.message}),e.dirty());else if("cuid2"===i.kind)Aa.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"cuid2",code:ea.invalid_string,message:i.message}),e.dirty());else if("ulid"===i.kind)ka.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"ulid",code:ea.invalid_string,message:i.message}),e.dirty());else if("url"===i.kind)try{new URL(t.data)}catch(r){n=this._getOrReturnCtx(t,n),aa(n,{validation:"url",code:ea.invalid_string,message:i.message}),e.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"regex",code:ea.invalid_string,message:i.message}),e.dirty())}else if("trim"===i.kind)t.data=t.data.trim();else if("includes"===i.kind)t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),e.dirty());else if("toLowerCase"===i.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===i.kind)t.data=t.data.toUpperCase();else if("startsWith"===i.kind)t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:{startsWith:i.value},message:i.message}),e.dirty());else if("endsWith"===i.kind)t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:{endsWith:i.value},message:i.message}),e.dirty());else if("datetime"===i.kind){za(i).test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:"datetime",message:i.message}),e.dirty())}else if("date"===i.kind){Da.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:"date",message:i.message}),e.dirty())}else if("time"===i.kind){new RegExp(`^${Fa(i)}$`).test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.invalid_string,validation:"time",message:i.message}),e.dirty())}else"duration"===i.kind?Ia.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"duration",code:ea.invalid_string,message:i.message}),e.dirty()):"ip"===i.kind?(r=t.data,("v4"!==(s=i.version)&&s||!Na.test(r))&&("v6"!==s&&s||!Za.test(r))&&(n=this._getOrReturnCtx(t,n),aa(n,{validation:"ip",code:ea.invalid_string,message:i.message}),e.dirty())):"jwt"===i.kind?Ka(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"jwt",code:ea.invalid_string,message:i.message}),e.dirty()):"cidr"===i.kind?Va(t.data,i.version)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"cidr",code:ea.invalid_string,message:i.message}),e.dirty()):"base64"===i.kind?ja.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"base64",code:ea.invalid_string,message:i.message}),e.dirty()):"base64url"===i.kind?Ha.test(t.data)||(n=this._getOrReturnCtx(t,n),aa(n,{validation:"base64url",code:ea.invalid_string,message:i.message}),e.dirty()):Jo.assertNever(i);var r,s;return{status:e.value,value:t.data}}_regex(t,e,n){return this.refinement((e=>t.test(e)),{validation:e,code:ea.invalid_string,...wa.errToObj(n)})}_addCheck(t){return new qa({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...wa.errToObj(t)})}url(t){return this._addCheck({kind:"url",...wa.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...wa.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...wa.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...wa.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...wa.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...wa.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...wa.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...wa.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...wa.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...wa.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...wa.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...wa.errToObj(t)})}datetime(t){var e,n;return"string"==typeof t?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,offset:null!==(e=null==t?void 0:t.offset)&&void 0!==e&&e,local:null!==(n=null==t?void 0:t.local)&&void 0!==n&&n,...wa.errToObj(null==t?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return"string"==typeof t?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,...wa.errToObj(null==t?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...wa.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...wa.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:null==e?void 0:e.position,...wa.errToObj(null==e?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...wa.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...wa.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...wa.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...wa.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...wa.errToObj(e)})}nonempty(t){return this.min(1,wa.errToObj(t))}trim(){return new qa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((t=>"datetime"===t.kind))}get isDate(){return!!this._def.checks.find((t=>"date"===t.kind))}get isTime(){return!!this._def.checks.find((t=>"time"===t.kind))}get isDuration(){return!!this._def.checks.find((t=>"duration"===t.kind))}get isEmail(){return!!this._def.checks.find((t=>"email"===t.kind))}get isURL(){return!!this._def.checks.find((t=>"url"===t.kind))}get isEmoji(){return!!this._def.checks.find((t=>"emoji"===t.kind))}get isUUID(){return!!this._def.checks.find((t=>"uuid"===t.kind))}get isNANOID(){return!!this._def.checks.find((t=>"nanoid"===t.kind))}get isCUID(){return!!this._def.checks.find((t=>"cuid"===t.kind))}get isCUID2(){return!!this._def.checks.find((t=>"cuid2"===t.kind))}get isULID(){return!!this._def.checks.find((t=>"ulid"===t.kind))}get isIP(){return!!this._def.checks.find((t=>"ip"===t.kind))}get isCIDR(){return!!this._def.checks.find((t=>"cidr"===t.kind))}get isBase64(){return!!this._def.checks.find((t=>"base64"===t.kind))}get isBase64url(){return!!this._def.checks.find((t=>"base64url"===t.kind))}get minLength(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}function Ma(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r;return parseInt(t.toFixed(s).replace(".",""))%parseInt(e.toFixed(s).replace(".",""))/Math.pow(10,s)}qa.create=t=>{var e;return new qa({checks:[],typeName:Ru.ZodString,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...Ea(t)})};class Ga extends Sa{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){this._def.coerce&&(t.data=Number(t.data));if(this._getType(t)!==Xo.number){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.number,received:e.parsedType}),ca}let e;const n=new ua;for(const r of this._def.checks)if("int"===r.kind)Jo.isInteger(t.data)||(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?t.data<r.value:t.data<=r.value)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?t.data>r.value:t.data>=r.value)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Ma(t.data,r.value)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(t.data)||(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.not_finite,message:r.message}),n.dirty()):Jo.assertNever(r);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,wa.toString(e))}gt(t,e){return this.setLimit("min",t,!1,wa.toString(e))}lte(t,e){return this.setLimit("max",t,!0,wa.toString(e))}lt(t,e){return this.setLimit("max",t,!1,wa.toString(e))}setLimit(t,e,n,r){return new Ga({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:wa.toString(r)}]})}_addCheck(t){return new Ga({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:wa.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:wa.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:wa.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:wa.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:wa.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:wa.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:wa.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:wa.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:wa.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find((t=>"int"===t.kind||"multipleOf"===t.kind&&Jo.isInteger(t.value)))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===e||n.value>e)&&(e=n.value):"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Ga.create=t=>new Ga({checks:[],typeName:Ru.ZodNumber,coerce:(null==t?void 0:t.coerce)||!1,...Ea(t)});class Wa extends Sa{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(e){return this._getInvalidInput(t)}if(this._getType(t)!==Xo.bigint)return this._getInvalidInput(t);let e;const n=new ua;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?t.data<r.value:t.data<=r.value)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?t.data>r.value:t.data>=r.value)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?t.data%r.value!==BigInt(0)&&(e=this._getOrReturnCtx(t,e),aa(e,{code:ea.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):Jo.assertNever(r);return{status:n.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.bigint,received:e.parsedType}),ca}gte(t,e){return this.setLimit("min",t,!0,wa.toString(e))}gt(t,e){return this.setLimit("min",t,!1,wa.toString(e))}lte(t,e){return this.setLimit("max",t,!0,wa.toString(e))}lt(t,e){return this.setLimit("max",t,!1,wa.toString(e))}setLimit(t,e,n,r){return new Wa({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:wa.toString(r)}]})}_addCheck(t){return new Wa({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:wa.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:wa.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:wa.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:wa.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:wa.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}Wa.create=t=>{var e;return new Wa({checks:[],typeName:Ru.ZodBigInt,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...Ea(t)})};class Ya extends Sa{_parse(t){this._def.coerce&&(t.data=Boolean(t.data));if(this._getType(t)!==Xo.boolean){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.boolean,received:e.parsedType}),ca}return ha(t.data)}}Ya.create=t=>new Ya({typeName:Ru.ZodBoolean,coerce:(null==t?void 0:t.coerce)||!1,...Ea(t)});class Ja extends Sa{_parse(t){this._def.coerce&&(t.data=new Date(t.data));if(this._getType(t)!==Xo.date){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.date,received:e.parsedType}),ca}if(isNaN(t.data.getTime())){return aa(this._getOrReturnCtx(t),{code:ea.invalid_date}),ca}const e=new ua;let n;for(const r of this._def.checks)"min"===r.kind?t.data.getTime()<r.value&&(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),e.dirty()):"max"===r.kind?t.data.getTime()>r.value&&(n=this._getOrReturnCtx(t,n),aa(n,{code:ea.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),e.dirty()):Jo.assertNever(r);return{status:e.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ja({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:wa.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:wa.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return null!=t?new Date(t):null}}Ja.create=t=>new Ja({checks:[],coerce:(null==t?void 0:t.coerce)||!1,typeName:Ru.ZodDate,...Ea(t)});class Qa extends Sa{_parse(t){if(this._getType(t)!==Xo.symbol){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.symbol,received:e.parsedType}),ca}return ha(t.data)}}Qa.create=t=>new Qa({typeName:Ru.ZodSymbol,...Ea(t)});class Xa extends Sa{_parse(t){if(this._getType(t)!==Xo.undefined){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.undefined,received:e.parsedType}),ca}return ha(t.data)}}Xa.create=t=>new Xa({typeName:Ru.ZodUndefined,...Ea(t)});class tu extends Sa{_parse(t){if(this._getType(t)!==Xo.null){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.null,received:e.parsedType}),ca}return ha(t.data)}}tu.create=t=>new tu({typeName:Ru.ZodNull,...Ea(t)});class eu extends Sa{constructor(){super(...arguments),this._any=!0}_parse(t){return ha(t.data)}}eu.create=t=>new eu({typeName:Ru.ZodAny,...Ea(t)});class nu extends Sa{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ha(t.data)}}nu.create=t=>new nu({typeName:Ru.ZodUnknown,...Ea(t)});class ru extends Sa{_parse(t){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.never,received:e.parsedType}),ca}}ru.create=t=>new ru({typeName:Ru.ZodNever,...Ea(t)});class su extends Sa{_parse(t){if(this._getType(t)!==Xo.undefined){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.void,received:e.parsedType}),ca}return ha(t.data)}}su.create=t=>new su({typeName:Ru.ZodVoid,...Ea(t)});class iu extends Sa{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),r=this._def;if(e.parsedType!==Xo.array)return aa(e,{code:ea.invalid_type,expected:Xo.array,received:e.parsedType}),ca;if(null!==r.exactLength){const t=e.data.length>r.exactLength.value,s=e.data.length<r.exactLength.value;(t||s)&&(aa(e,{code:t?ea.too_big:ea.too_small,minimum:s?r.exactLength.value:void 0,maximum:t?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&e.data.length<r.minLength.value&&(aa(e,{code:ea.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&e.data.length>r.maxLength.value&&(aa(e,{code:ea.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map(((t,n)=>r.type._parseAsync(new _a(e,t,e.path,n))))).then((t=>ua.mergeArray(n,t)));const s=[...e.data].map(((t,n)=>r.type._parseSync(new _a(e,t,e.path,n))));return ua.mergeArray(n,s)}get element(){return this._def.type}min(t,e){return new iu({...this._def,minLength:{value:t,message:wa.toString(e)}})}max(t,e){return new iu({...this._def,maxLength:{value:t,message:wa.toString(e)}})}length(t,e){return new iu({...this._def,exactLength:{value:t,message:wa.toString(e)}})}nonempty(t){return this.min(1,t)}}function ou(t){if(t instanceof au){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ou.create(ou(r))}return new au({...t._def,shape:()=>e})}return t instanceof iu?new iu({...t._def,type:ou(t.element)}):t instanceof Ou?Ou.create(ou(t.unwrap())):t instanceof Au?Au.create(ou(t.unwrap())):t instanceof lu?lu.create(t.items.map((t=>ou(t)))):t}iu.create=(t,e)=>new iu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ru.ZodArray,...Ea(e)});class au extends Sa{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const t=this._def.shape(),e=Jo.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==Xo.object){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.object,received:e.parsedType}),ca}const{status:e,ctx:n}=this._processInputParams(t),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof ru&&"strip"===this._def.unknownKeys))for(const t in n.data)s.includes(t)||i.push(t);const o=[];for(const t of s){const e=r[t],s=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new _a(n,s,n.path,t)),alwaysSet:t in n.data})}if(this._def.catchall instanceof ru){const t=this._def.unknownKeys;if("passthrough"===t)for(const t of i)o.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===t)i.length>0&&(aa(n,{code:ea.unrecognized_keys,keys:i}),e.dirty());else if("strip"!==t)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const t=this._def.catchall;for(const e of i){const r=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new _a(n,r,n.path,e)),alwaysSet:e in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const t=[];for(const e of o){const n=await e.key,r=await e.value;t.push({key:n,value:r,alwaysSet:e.alwaysSet})}return t})).then((t=>ua.mergeObjectSync(e,t))):ua.mergeObjectSync(e,o)}get shape(){return this._def.shape()}strict(t){return new au({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,s,i,o;const a=null!==(i=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,e,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(o=wa.errToObj(t).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new au({...this._def,unknownKeys:"strip"})}passthrough(){return new au({...this._def,unknownKeys:"passthrough"})}extend(t){return new au({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new au({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ru.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new au({...this._def,catchall:t})}pick(t){const e={};return Jo.objectKeys(t).forEach((n=>{t[n]&&this.shape[n]&&(e[n]=this.shape[n])})),new au({...this._def,shape:()=>e})}omit(t){const e={};return Jo.objectKeys(this.shape).forEach((n=>{t[n]||(e[n]=this.shape[n])})),new au({...this._def,shape:()=>e})}deepPartial(){return ou(this)}partial(t){const e={};return Jo.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];t&&!t[n]?e[n]=r:e[n]=r.optional()})),new au({...this._def,shape:()=>e})}required(t){const e={};return Jo.objectKeys(this.shape).forEach((n=>{if(t&&!t[n])e[n]=this.shape[n];else{let t=this.shape[n];for(;t instanceof Ou;)t=t._def.innerType;e[n]=t}})),new au({...this._def,shape:()=>e})}keyof(){return vu(Jo.objectKeys(this.shape))}}au.create=(t,e)=>new au({shape:()=>t,unknownKeys:"strip",catchall:ru.create(),typeName:Ru.ZodObject,...Ea(e)}),au.strictCreate=(t,e)=>new au({shape:()=>t,unknownKeys:"strict",catchall:ru.create(),typeName:Ru.ZodObject,...Ea(e)}),au.lazycreate=(t,e)=>new au({shape:t,unknownKeys:"strip",catchall:ru.create(),typeName:Ru.ZodObject,...Ea(e)});class uu extends Sa{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;if(e.common.async)return Promise.all(n.map((async t=>{const n={...e,common:{...e.common,issues:[]},parent:null};return{result:await t._parseAsync({data:e.data,path:e.path,parent:n}),ctx:n}}))).then((function(t){for(const e of t)if("valid"===e.result.status)return e.result;for(const n of t)if("dirty"===n.result.status)return e.common.issues.push(...n.ctx.common.issues),n.result;const n=t.map((t=>new na(t.ctx.common.issues)));return aa(e,{code:ea.invalid_union,unionErrors:n}),ca}));{let t;const r=[];for(const s of n){const n={...e,common:{...e.common,issues:[]},parent:null},i=s._parseSync({data:e.data,path:e.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||t||(t={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(t)return e.common.issues.push(...t.ctx.common.issues),t.result;const s=r.map((t=>new na(t)));return aa(e,{code:ea.invalid_union,unionErrors:s}),ca}}get options(){return this._def.options}}uu.create=(t,e)=>new uu({options:t,typeName:Ru.ZodUnion,...Ea(e)});const cu=t=>t instanceof wu?cu(t.schema):t instanceof Su?cu(t.innerType()):t instanceof bu?[t.value]:t instanceof _u?t.options:t instanceof xu?Jo.objectValues(t.enum):t instanceof ku?cu(t._def.innerType):t instanceof Xa?[void 0]:t instanceof tu?[null]:t instanceof Ou?[void 0,...cu(t.unwrap())]:t instanceof Au?[null,...cu(t.unwrap())]:t instanceof Iu||t instanceof Tu?cu(t.unwrap()):t instanceof Cu?cu(t._def.innerType):[];class fu extends Sa{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Xo.object)return aa(e,{code:ea.invalid_type,expected:Xo.object,received:e.parsedType}),ca;const n=this.discriminator,r=e.data[n],s=this.optionsMap.get(r);return s?e.common.async?s._parseAsync({data:e.data,path:e.path,parent:e}):s._parseSync({data:e.data,path:e.path,parent:e}):(aa(e,{code:ea.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ca)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,n){const r=new Map;for(const n of e){const e=cu(n.shape[t]);if(!e.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of e){if(r.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);r.set(s,n)}}return new fu({typeName:Ru.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:r,...Ea(n)})}}function hu(t,e){const n=ta(t),r=ta(e);if(t===e)return{valid:!0,data:t};if(n===Xo.object&&r===Xo.object){const n=Jo.objectKeys(e),r=Jo.objectKeys(t).filter((t=>-1!==n.indexOf(t))),s={...t,...e};for(const n of r){const r=hu(t[n],e[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(n===Xo.array&&r===Xo.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<t.length;r++){const s=hu(t[r],e[r]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===Xo.date&&r===Xo.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class du extends Sa{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),r=(t,r)=>{if(da(t)||da(r))return ca;const s=hu(t.value,r.value);return s.valid?((la(t)||la(r))&&e.dirty(),{status:e.value,value:s.data}):(aa(n,{code:ea.invalid_intersection_types}),ca)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([t,e])=>r(t,e))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}du.create=(t,e,n)=>new du({left:t,right:e,typeName:Ru.ZodIntersection,...Ea(n)});class lu extends Sa{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Xo.array)return aa(n,{code:ea.invalid_type,expected:Xo.array,received:n.parsedType}),ca;if(n.data.length<this._def.items.length)return aa(n,{code:ea.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ca;!this._def.rest&&n.data.length>this._def.items.length&&(aa(n,{code:ea.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...n.data].map(((t,e)=>{const r=this._def.items[e]||this._def.rest;return r?r._parse(new _a(n,t,n.path,e)):null})).filter((t=>!!t));return n.common.async?Promise.all(r).then((t=>ua.mergeArray(e,t))):ua.mergeArray(e,r)}get items(){return this._def.items}rest(t){return new lu({...this._def,rest:t})}}lu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lu({items:t,typeName:Ru.ZodTuple,rest:null,...Ea(e)})};class pu extends Sa{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Xo.object)return aa(n,{code:ea.invalid_type,expected:Xo.object,received:n.parsedType}),ca;const r=[],s=this._def.keyType,i=this._def.valueType;for(const t in n.data)r.push({key:s._parse(new _a(n,t,n.path,t)),value:i._parse(new _a(n,n.data[t],n.path,t)),alwaysSet:t in n.data});return n.common.async?ua.mergeObjectAsync(e,r):ua.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(t,e,n){return new pu(e instanceof Sa?{keyType:t,valueType:e,typeName:Ru.ZodRecord,...Ea(n)}:{keyType:qa.create(),valueType:t,typeName:Ru.ZodRecord,...Ea(e)})}}class gu extends Sa{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Xo.map)return aa(n,{code:ea.invalid_type,expected:Xo.map,received:n.parsedType}),ca;const r=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map((([t,e],i)=>({key:r._parse(new _a(n,t,n.path,[i,"key"])),value:s._parse(new _a(n,e,n.path,[i,"value"]))})));if(n.common.async){const t=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,s=await n.value;if("aborted"===r.status||"aborted"===s.status)return ca;"dirty"!==r.status&&"dirty"!==s.status||e.dirty(),t.set(r.value,s.value)}return{status:e.value,value:t}}))}{const t=new Map;for(const n of i){const r=n.key,s=n.value;if("aborted"===r.status||"aborted"===s.status)return ca;"dirty"!==r.status&&"dirty"!==s.status||e.dirty(),t.set(r.value,s.value)}return{status:e.value,value:t}}}}gu.create=(t,e,n)=>new gu({valueType:e,keyType:t,typeName:Ru.ZodMap,...Ea(n)});class yu extends Sa{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Xo.set)return aa(n,{code:ea.invalid_type,expected:Xo.set,received:n.parsedType}),ca;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(aa(n,{code:ea.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),e.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(aa(n,{code:ea.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),e.dirty());const s=this._def.valueType;function i(t){const n=new Set;for(const r of t){if("aborted"===r.status)return ca;"dirty"===r.status&&e.dirty(),n.add(r.value)}return{status:e.value,value:n}}const o=[...n.data.values()].map(((t,e)=>s._parse(new _a(n,t,n.path,e))));return n.common.async?Promise.all(o).then((t=>i(t))):i(o)}min(t,e){return new yu({...this._def,minSize:{value:t,message:wa.toString(e)}})}max(t,e){return new yu({...this._def,maxSize:{value:t,message:wa.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}yu.create=(t,e)=>new yu({valueType:t,minSize:null,maxSize:null,typeName:Ru.ZodSet,...Ea(e)});class mu extends Sa{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Xo.function)return aa(e,{code:ea.invalid_type,expected:Xo.function,received:e.parsedType}),ca;function n(t,n){return oa({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ia(),ra].filter((t=>!!t)),issueData:{code:ea.invalid_arguments,argumentsError:n}})}function r(t,n){return oa({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ia(),ra].filter((t=>!!t)),issueData:{code:ea.invalid_return_type,returnTypeError:n}})}const s={errorMap:e.common.contextualErrorMap},i=e.data;if(this._def.returns instanceof Eu){const t=this;return ha((async function(...e){const o=new na([]),a=await t._def.args.parseAsync(e,s).catch((t=>{throw o.addIssue(n(e,t)),o})),u=await Reflect.apply(i,this,a);return await t._def.returns._def.type.parseAsync(u,s).catch((t=>{throw o.addIssue(r(u,t)),o}))}))}{const t=this;return ha((function(...e){const o=t._def.args.safeParse(e,s);if(!o.success)throw new na([n(e,o.error)]);const a=Reflect.apply(i,this,o.data),u=t._def.returns.safeParse(a,s);if(!u.success)throw new na([r(a,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new mu({...this._def,args:lu.create(t).rest(nu.create())})}returns(t){return new mu({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,n){return new mu({args:t||lu.create([]).rest(nu.create()),returns:e||nu.create(),typeName:Ru.ZodFunction,...Ea(n)})}}class wu extends Sa{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}wu.create=(t,e)=>new wu({getter:t,typeName:Ru.ZodLazy,...Ea(e)});class bu extends Sa{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return aa(e,{received:e.data,code:ea.invalid_literal,expected:this._def.value}),ca}return{status:"valid",value:t.data}}get value(){return this._def.value}}function vu(t,e){return new _u({values:t,typeName:Ru.ZodEnum,...Ea(e)})}bu.create=(t,e)=>new bu({value:t,typeName:Ru.ZodLiteral,...Ea(e)});class _u extends Sa{constructor(){super(...arguments),ba.set(this,void 0)}_parse(t){if("string"!=typeof t.data){const e=this._getOrReturnCtx(t),n=this._def.values;return aa(e,{expected:Jo.joinValues(n),received:e.parsedType,code:ea.invalid_type}),ca}if(ya(this,ba,"f")||ma(this,ba,new Set(this._def.values),"f"),!ya(this,ba,"f").has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return aa(e,{received:e.data,code:ea.invalid_enum_value,options:n}),ca}return ha(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return _u.create(t,{...this._def,...e})}exclude(t,e=this._def){return _u.create(this.options.filter((e=>!t.includes(e))),{...this._def,...e})}}ba=new WeakMap,_u.create=vu;class xu extends Sa{constructor(){super(...arguments),va.set(this,void 0)}_parse(t){const e=Jo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Xo.string&&n.parsedType!==Xo.number){const t=Jo.objectValues(e);return aa(n,{expected:Jo.joinValues(t),received:n.parsedType,code:ea.invalid_type}),ca}if(ya(this,va,"f")||ma(this,va,new Set(Jo.getValidEnumValues(this._def.values)),"f"),!ya(this,va,"f").has(t.data)){const t=Jo.objectValues(e);return aa(n,{received:n.data,code:ea.invalid_enum_value,options:t}),ca}return ha(t.data)}get enum(){return this._def.values}}va=new WeakMap,xu.create=(t,e)=>new xu({values:t,typeName:Ru.ZodNativeEnum,...Ea(e)});class Eu extends Sa{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Xo.promise&&!1===e.common.async)return aa(e,{code:ea.invalid_type,expected:Xo.promise,received:e.parsedType}),ca;const n=e.parsedType===Xo.promise?e.data:Promise.resolve(e.data);return ha(n.then((t=>this._def.type.parseAsync(t,{path:e.path,errorMap:e.common.contextualErrorMap}))))}}Eu.create=(t,e)=>new Eu({type:t,typeName:Ru.ZodPromise,...Ea(e)});class Su extends Sa{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ru.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),r=this._def.effect||null,s={addIssue:t=>{aa(n,t),t.fatal?e.abort():e.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===r.type){const t=r.transform(n.data,s);if(n.common.async)return Promise.resolve(t).then((async t=>{if("aborted"===e.value)return ca;const r=await this._def.schema._parseAsync({data:t,path:n.path,parent:n});return"aborted"===r.status?ca:"dirty"===r.status||"dirty"===e.value?fa(r.value):r}));{if("aborted"===e.value)return ca;const r=this._def.schema._parseSync({data:t,path:n.path,parent:n});return"aborted"===r.status?ca:"dirty"===r.status||"dirty"===e.value?fa(r.value):r}}if("refinement"===r.type){const t=t=>{const e=r.refinement(t,s);if(n.common.async)return Promise.resolve(e);if(e instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return t};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ca:("dirty"===r.status&&e.dirty(),t(r.value),{status:e.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ca:("dirty"===n.status&&e.dirty(),t(n.value).then((()=>({status:e.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const t=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!pa(t))return t;const i=r.transform(t.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((t=>pa(t)?Promise.resolve(r.transform(t.value,s)).then((t=>({status:e.value,value:t}))):t))}Jo.assertNever(r)}}Su.create=(t,e,n)=>new Su({schema:t,typeName:Ru.ZodEffects,effect:e,...Ea(n)}),Su.createWithPreprocess=(t,e,n)=>new Su({schema:e,effect:{type:"preprocess",transform:t},typeName:Ru.ZodEffects,...Ea(n)});class Ou extends Sa{_parse(t){return this._getType(t)===Xo.undefined?ha(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ou.create=(t,e)=>new Ou({innerType:t,typeName:Ru.ZodOptional,...Ea(e)});class Au extends Sa{_parse(t){return this._getType(t)===Xo.null?ha(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Au.create=(t,e)=>new Au({innerType:t,typeName:Ru.ZodNullable,...Ea(e)});class ku extends Sa{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===Xo.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}ku.create=(t,e)=>new ku({innerType:t,typeName:Ru.ZodDefault,defaultValue:"function"==typeof e.default?e.default:()=>e.default,...Ea(e)});class Cu extends Sa{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ga(r)?r.then((t=>({status:"valid",value:"valid"===t.status?t.value:this._def.catchValue({get error(){return new na(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new na(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Cu.create=(t,e)=>new Cu({innerType:t,typeName:Ru.ZodCatch,catchValue:"function"==typeof e.catch?e.catch:()=>e.catch,...Ea(e)});class Pu extends Sa{_parse(t){if(this._getType(t)!==Xo.nan){const e=this._getOrReturnCtx(t);return aa(e,{code:ea.invalid_type,expected:Xo.nan,received:e.parsedType}),ca}return{status:"valid",value:t.data}}}Pu.create=t=>new Pu({typeName:Ru.ZodNaN,...Ea(t)});const Uu=Symbol("zod_brand");class Iu extends Sa{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class Bu extends Sa{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async){return(async()=>{const t=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?ca:"dirty"===t.status?(e.dirty(),fa(t.value)):this._def.out._parseAsync({data:t.value,path:n.path,parent:n})})()}{const t=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?ca:"dirty"===t.status?(e.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:n.path,parent:n})}}static create(t,e){return new Bu({in:t,out:e,typeName:Ru.ZodPipeline})}}class Tu extends Sa{_parse(t){const e=this._def.innerType._parse(t),n=t=>(pa(t)&&(t.value=Object.freeze(t.value)),t);return ga(e)?e.then((t=>n(t))):n(e)}unwrap(){return this._def.innerType}}function Nu(t,e){const n="function"==typeof t?t(e):"string"==typeof t?{message:t}:t;return"string"==typeof n?{message:n}:n}function Lu(t,e={},n){return t?eu.create().superRefine(((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then((t=>{var i,o;if(!t){const t=Nu(e,r),a=null===(o=null!==(i=t.fatal)&&void 0!==i?i:n)||void 0===o||o;s.addIssue({code:"custom",...t,fatal:a})}}));if(!a){const t=Nu(e,r),a=null===(o=null!==(i=t.fatal)&&void 0!==i?i:n)||void 0===o||o;s.addIssue({code:"custom",...t,fatal:a})}})):eu.create()}Tu.create=(t,e)=>new Tu({innerType:t,typeName:Ru.ZodReadonly,...Ea(e)});const Zu={object:au.lazycreate};var Ru;!function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"}(Ru||(Ru={}));const ju=qa.create,Hu=Ga.create,$u=Pu.create,Du=Wa.create,Fu=Ya.create,zu=Ja.create,Ku=Qa.create,Vu=Xa.create,qu=tu.create,Mu=eu.create,Gu=nu.create,Wu=ru.create,Yu=su.create,Ju=iu.create,Qu=au.create,Xu=au.strictCreate,tc=uu.create,ec=fu.create,nc=du.create,rc=lu.create,sc=pu.create,ic=gu.create,oc=yu.create,ac=mu.create,uc=wu.create,cc=bu.create,fc=_u.create,hc=xu.create,dc=Eu.create,lc=Su.create,pc=Ou.create,gc=Au.create,yc=Su.createWithPreprocess,mc=Bu.create,wc={string:t=>qa.create({...t,coerce:!0}),number:t=>Ga.create({...t,coerce:!0}),boolean:t=>Ya.create({...t,coerce:!0}),bigint:t=>Wa.create({...t,coerce:!0}),date:t=>Ja.create({...t,coerce:!0})},bc=ca;var vc=Object.freeze({__proto__:null,defaultErrorMap:ra,setErrorMap:function(t){sa=t},getErrorMap:ia,makeIssue:oa,EMPTY_PATH:[],addIssueToContext:aa,ParseStatus:ua,INVALID:ca,DIRTY:fa,OK:ha,isAborted:da,isDirty:la,isValid:pa,isAsync:ga,get util(){return Jo},get objectUtil(){return Qo},ZodParsedType:Xo,getParsedType:ta,ZodType:Sa,datetimeRegex:za,ZodString:qa,ZodNumber:Ga,ZodBigInt:Wa,ZodBoolean:Ya,ZodDate:Ja,ZodSymbol:Qa,ZodUndefined:Xa,ZodNull:tu,ZodAny:eu,ZodUnknown:nu,ZodNever:ru,ZodVoid:su,ZodArray:iu,ZodObject:au,ZodUnion:uu,ZodDiscriminatedUnion:fu,ZodIntersection:du,ZodTuple:lu,ZodRecord:pu,ZodMap:gu,ZodSet:yu,ZodFunction:mu,ZodLazy:wu,ZodLiteral:bu,ZodEnum:_u,ZodNativeEnum:xu,ZodPromise:Eu,ZodEffects:Su,ZodTransformer:Su,ZodOptional:Ou,ZodNullable:Au,ZodDefault:ku,ZodCatch:Cu,ZodNaN:Pu,BRAND:Uu,ZodBranded:Iu,ZodPipeline:Bu,ZodReadonly:Tu,custom:Lu,Schema:Sa,ZodSchema:Sa,late:Zu,get ZodFirstPartyTypeKind(){return Ru},coerce:wc,any:Mu,array:Ju,bigint:Du,boolean:Fu,date:zu,discriminatedUnion:ec,effect:lc,enum:fc,function:ac,instanceof:(t,e={message:`Input not instance of ${t.name}`})=>Lu((e=>e instanceof t),e),intersection:nc,lazy:uc,literal:cc,map:ic,nan:$u,nativeEnum:hc,never:Wu,null:qu,nullable:gc,number:Hu,object:Qu,oboolean:()=>Fu().optional(),onumber:()=>Hu().optional(),optional:pc,ostring:()=>ju().optional(),pipeline:mc,preprocess:yc,promise:dc,record:sc,set:oc,strictObject:Xu,string:ju,symbol:Ku,transformer:lc,tuple:rc,undefined:Vu,union:tc,unknown:Gu,void:Yu,NEVER:bc,ZodIssueCode:ea,quotelessJson:t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:na});const _c=vc.string().regex(/^[a-fA-F0-9]$/),xc=vc.string().regex(/^[a-fA-F0-9]{64}$/),Ec=vc.number().min(0).max(4294967295),Sc=vc.bigint(),Oc=vc.instanceof(Uint8Array),Ac=vc.union([_c,Ec,vc.string(),Oc]).array(),kc=vc.union([Ac,_c,Oc]),Cc=vc.array(kc),Pc=vc.object({value:vc.union([Ec,Sc]),scriptPubKey:kc}),Uc=vc.object({txid:xc,vout:Ec,scriptSig:kc,sequence:Ec,prevout:Pc.optional(),witness:Cc}),Ic={TxData:vc.object({version:Ec,vin:vc.array(Uc),vout:vc.array(Pc),locktime:Ec}),TxInput:Uc,TxOutput:Pc,witness:Cc,script:kc,hexstr:_c,hash:xc,uint32:Ec,uint64:Sc};return t.Address=fo,t.Input=Wo,t.Output=Mo,t.Script=Nt,t.Sequence=qo,t.Signer=Ho,t.Tap=Do,t.Transaction=class{constructor(t){"string"==typeof t&&(t=st.hex(t)),t instanceof Uint8Array&&(t=io.decode(t));const e=Ic.TxData;this._data=e.parse(io.create(t))}get data(){return this._data}get version(){return this.data.version}get vin(){return this.data.vin.map(((t,e)=>new Wo(this.data,e)))}get vout(){return this.data.vout.map((t=>new Mo(t)))}get locktime(){return new Yo(this.data.locktime)}get base(){return io.encode(this.data,!0)}get buff(){return io.encode(this.data)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get size(){return this.raw.length}get bsize(){return this.base.length}get weight(){return 3*this.bsize+this.size}get vsize(){const t=this.weight%4>0?1:0;return Math.floor(this.weight/4)+t}get hash(){return ri(this.buff).reverse().hex}get txid(){return ri(this.base).reverse().hex}async export(){const{size:t,weight:e,vsize:n,hex:r}=this;return{txid:this.txid,hash:this.hash,...this.data,size:t,weight:e,vsize:n,hex:r}}},t.Tx=io,t.Witness=Go,t}({});
//# sourceMappingURL=bundle.min.js.map
